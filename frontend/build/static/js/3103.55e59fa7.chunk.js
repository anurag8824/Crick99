"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[3103],{3103:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var r=a(4919),l=a(9950),d=a(9449),n=a(4635),i=a(9564),t=a(8674),o=a(387),c=a(666),m=a(6473),u=a(7232),h=(a(7705),a(8429)),p=a(3170),v=a(8306),x=a(8783),j=a(4414);const b=c.Ik().shape({username:c.Yj().trim("User name cannot include leading and trailing spaces").strict(!0).required("Username is required"),password:c.Yj().required("Password is required").min(8,"Password must be at least 6 characters").matches(/^[A-Z][a-z0-9_-]{3,19}$/,"Must Contain One Uppercase"),role:c.Yj().required("Role is required"),creditRefrences:c.Yj(),share:c.Yj(),mcom:c.Yj(),scom:c.Yj(),sendamount:c.ai(),exposerLimit:c.Yj().when("role",{is:"user",then:c.Yj()})}),N=()=>{var e,s,a,c,N,f,g,A,y;const w=(0,t.G)(o.Qg);console.log(w,"user admin details");const[S,C]=l.useState(),[V,L]=l.useState(!1),[k,B]=l.useState(!1),I=(0,t.G)(p.rt),[O,_]=l.useState({}),[R,M]=l.useState(),[U,F]=l.useState(),[E,P]=l.useState(!1);l.useEffect((()=>{var e;const s=null===w||void 0===w||null===(e=w.user)||void 0===e?void 0:e.username;console.log(s,"testagentmaster"),i.A.getParentUserDetail(s).then((e=>{var s,a,r,l,d;console.log(e,"check balance for parent");const n=null===(s=e.data)||void 0===s||null===(a=s.data[0])||void 0===a||null===(r=a.balance)||void 0===r?void 0:r.balance,i=null===e||void 0===e||null===(l=e.data)||void 0===l||null===(d=l.data[0])||void 0===d?void 0:d.share;M(i),_(n),F(n)}))}),[w]);const{username:T}=(0,h.g)(),Y=(0,h.g)().type;console.log(Y,"the type for code");let q="";switch(Y){case"sadmin":q="SB";break;case"suadmin":q="AD";break;case"smdl":q="MA";break;case"mdl":q="SA";break;case"dl":q="A";break;case"user":q="C";break;default:q=""}const D=q+(Math.floor(80001*Math.random())+19999);console.log(D,"the first code");const{register:G,handleSubmit:z,reset:H,getValues:J,setValue:Q,formState:{errors:Z}}=(0,d.mN)({resolver:(0,m.t)(b,{context:{maxBalance:U}}),mode:"onChange",defaultValues:{password:"Abcd1122",transactionPassword:"123456"}});l.useEffect((()=>{T&&i.A.getUserDetail(T).then((e=>{C(e.data.data)}))}),[T]),l.useEffect((()=>{const e=Object.values(n.T);Y&&e.includes(Y)&&(Q("role",Y),L(Y===n.T.user),B(Y===n.T.user))}),[Y,Q]),l.useEffect((()=>{Q("transactionPassword","123456")}),[Q]);const[$,K]=l.useState({}),W=z((e=>{if(Number(e.sendamount)>Number(U))u.oR.error("Client Limit cannot exceed available balance (".concat(U,")"));else{if(P(!0),e.creditRefrences=e.sendamount,e.exposerLimit=e.sendamount,e.role!==n.T.user){const s=[10,20,30],a={};console.log("partenershipValue:",s),s.forEach(((e,s)=>{void 0!==e&&(a[s]=e)}));const r={},l=Array.isArray(e.minbet)?e.minbet:Object.values(e.minbet||{}),d=Array.isArray(e.maxbet)?e.maxbet:Object.values(e.maxbet||{}),n=Array.isArray(e.delay)?e.delay:Object.values(e.delay||{});console.log("minBetValue:",l),console.log("maxBetValue:",d),console.log("delayValue:",n),l.forEach(((e,s)=>{void 0!==e&&(r[s]={minBet:e})})),d.forEach(((e,s)=>{void 0!==e&&(r[s]=Object.assign(r[s]||{},{maxBet:e}))})),n.forEach(((e,s)=>{void 0!==e&&(r[s]=Object.assign(r[s]||{},{delay:e}))})),console.log(r,"setingnggnngrrr"),e.userSetting=r}e.parent=null===X||void 0===X?void 0:X.username,e.code=D,e.pshare=R,i.A.addUser(e).then((s=>{var a,r;"New User Added and Funded Successfully"===(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)?(P(!1),console.log(e,"cretae data"),K(e),console.log(s,"resss "),u.oR.success("User successfully created"),H(),window.location.reload()):(P(!1),u.oR.error(null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message))})).catch((e=>{var s,a;const r=null===(s=e.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message;P(!1),u.oR.error(r)})),console.log(e,"send dataa")}})),X=S||(null===w||void 0===w?void 0:w.user);return(0,j.jsx)("div",{className:"container-fluid",children:(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-md-12 main-container",children:(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:"add-account",children:[(0,j.jsxs)("h2",{className:"m-b-20",children:[(0,j.jsx)(x.A,{}),"Create"]}),(0,j.jsxs)("form",{onSubmit:W,children:[(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6 personal-detail",children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsxs)("div",{className:"col-md-6",children:[(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{htmlFor:"username",children:" Name:"}),(0,j.jsx)("input",(0,r.A)((0,r.A)({placeholder:"User Name",id:"username"},G("username")),{},{defaultValue:"",type:"text",className:"form-control"})),(0,j.jsx)("span",{id:"username-error",className:"error",style:{display:"none"},children:"Username already taken"}),(null===Z||void 0===Z?void 0:Z.username)&&(0,j.jsx)("span",{id:"username-required",className:"error",children:Z.username.message})]}),(0,j.jsx)("div",{children:(0,j.jsx)("input",{type:"text",className:"form-control username",value:D})})]}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{htmlFor:"password",children:"User password:"}),(0,j.jsx)("input",(0,r.A)((0,r.A)({maxLength:8,placeholder:"Password",id:"password"},G("password")),{},{type:"password",className:"form-control"})),(null===Z||void 0===Z?void 0:Z.password)&&(0,j.jsx)("span",{id:"password-error",className:"error",children:Z.password.message})]})})]})}),(0,j.jsx)("div",{className:"col-md-6 account-detail",children:(0,j.jsxs)("div",{className:"row",children:[(0,j.jsx)("div",{className:"col-md-6",children:"undefined"===Y?(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{htmlFor:"role",children:"Account Type:"}),(0,j.jsxs)("select",(0,r.A)((0,r.A)({},G("role",{onChange:e=>{const s=e.target.value;L(s===n.T.user),B(s===n.T.user)}})),{},{id:"role",className:"form-control",children:[(0,j.jsx)("option",{value:"",children:"- Select Your Account Type -"}),(()=>{const e=X.role,s=JSON.parse(JSON.stringify(n.w));delete s.admin;const a=s;if(e&&"admin"!=e){const s=Object.keys(a),r=s.indexOf(e);return s.slice(r+1).map(((s,r)=>!(+e>=++r)&&(0,j.jsx)("option",{value:s,children:a[s]},r)))}return Object.keys(a).map(((e,s)=>(0,j.jsx)("option",{value:e,children:a[e]},s)))})()]})),(null===Z||void 0===Z?void 0:Z.role)&&(0,j.jsx)("span",{id:"role-error",className:"error",children:Z.role.message})]}):""}),(0,j.jsx)("div",{className:"col-md-6 d-none",children:(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{htmlFor:"creditrefrence",children:"Client Limit:"}),(0,j.jsx)("input",(0,r.A)((0,r.A)({className:"form-control",placeholder:"Super Limit"},G("creditRefrences")),{},{id:"creditRefrences",defaultValue:"",min:"0",type:"number"})),(null===Z||void 0===Z?void 0:Z.creditRefrences)&&(0,j.jsx)("span",{id:"creditrefrence-error",className:"error",children:Z.creditRefrences.message})]})}),!k&&(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsxs)("label",{htmlFor:"share",children:["Super Share :","(\u2264".concat(R||0,")")]}),(0,j.jsx)("input",(0,r.A)((0,r.A)({className:"form-control",placeholder:"Supershare Limit"},G("share")),{},{id:"share",defaultValue:0,min:"0",max:R||0,type:"number"}))]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsxs)("label",{htmlFor:"sendamount",children:["Client Limit Balance (",U||"",")"]}),(0,j.jsx)("input",(0,r.A)((0,r.A)({className:"form-control",placeholder:"sendamount "},G("sendamount")),{},{id:"sendamount",defaultValue:0,min:"0",type:"number"}))]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{htmlFor:"mcom",children:"Match Commision(\u22642%)"}),(0,j.jsx)("input",(0,r.A)((0,r.A)({className:"form-control",placeholder:"M Comm Limit"},G("mcom")),{},{id:"mcom",defaultValue:0,min:"0",max:"2",type:"number"}))]})}),(0,j.jsx)("div",{className:"col-md-6",children:(0,j.jsxs)("div",{className:"form-group",children:[(0,j.jsx)("label",{htmlFor:"scom",children:"Session Commision(\u22644%)"}),(0,j.jsx)("input",(0,r.A)((0,r.A)({className:"form-control",placeholder:"S Comm Limit"},G("scom")),{},{id:"scom",defaultValue:0,min:"0",max:"4",type:"number"}))]})}),k&&(0,j.jsx)("div",{className:"col-md-6 d-none ",children:(0,j.jsxs)("div",{className:"form-group",id:"exposer-limit",children:[(0,j.jsx)("label",{htmlFor:"exposerLimit",children:"Exposer Limit:"}),(0,j.jsx)("input",(0,r.A)((0,r.A)({placeholder:"Exposer Limit",id:"exposerLimit"},G("exposerLimit")),{},{defaultValue:"",type:"number",className:"form-control",min:"0"})),(null===Z||void 0===Z?void 0:Z.exposerLimit)&&(0,j.jsx)("span",{id:"exposerlimit-error",className:"error",children:Z.exposerLimit.message})]})})]})})]}),!k&&(0,j.jsx)("div",{style:{display:"none"},className:"row m-t-20",id:"partnership-div",children:(0,j.jsx)("div",{className:"col-md-12",children:(0,j.jsxs)("table",{className:"table table-striped table-bordereddd",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{}),I.sports.map((e=>1===e.sportId||2===e.sportId||4===e.sportId?(0,j.jsx)("th",{className:"",children:"Soccer"===e.name?"Match Commission (%)":"Tennis"===e.name?"Session Commission (%)":""},e._id):(0,j.jsx)("th",{},e._id)))]})}),(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{className:"hidden",children:[(0,j.jsx)("td",{children:"Upline"}),I.sports.map((e=>{var s;let{_id:a,sportId:r}=e;return 1==r||2==r?(0,j.jsx)("td",{id:"taxpartnership-upline",children:null===X||void 0===X||null===(s=X.partnership)||void 0===s?void 0:s[r].ownRatio},"upline-".concat(a)):(0,j.jsx)("td",{},a)}))]}),(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{}),null===(e=I.sports)||void 0===e?void 0:e.map((e=>{let{_id:s,sportId:a}=e;return 4===a?(0,j.jsx)("td",{children:(0,j.jsx)("input",(0,r.A)((0,r.A)({type:"hidden"},G("partnership.".concat(a))),{},{value:0}))},s):1===a||2===a?(0,j.jsxs)("td",{children:[(0,j.jsx)("input",(0,r.A)((0,r.A)({className:"partnership"},G("partnership.".concat(a),{onChange:e=>{var s,r;const l=null===(s=X.partnership)||void 0===s||null===(r=s[a])||void 0===r?void 0:r.ownRatio;Q("partnershipOur.".concat(a),l?l-e.target.value:J("partnershipOur.".concat(a)))}})),{},{id:"partnership.".concat(a),placeholder:"",max:null===X||void 0===X||null===(l=X.partnership)||void 0===l||null===(d=l[a])||void 0===d?void 0:d.ownRatio,min:"0",defaultValue:0,type:"number",disabled:V})),(0,j.jsx)("span",{className:"error"})]},s):(0,j.jsx)("td",{},s);var l,d}))]}),(0,j.jsxs)("tr",{className:"hidden",children:[(0,j.jsx)("td",{children:"Our"}),null===(s=I.sports)||void 0===s?void 0:s.map((e=>{var s;let{_id:a,sportId:l}=e;return 1==l||2==l?(0,j.jsx)("td",{id:"taxpartnership-our.".concat(l),children:(0,j.jsx)("input",(0,r.A)((0,r.A)({},G("partnershipOur.".concat(l))),{},{value:null===X||void 0===X||null===(s=X.partnership)||void 0===s?void 0:s[l].ownRatio,disabled:!0}))},a):(0,j.jsx)("td",{},a)}))]})]})]})})}),(0,j.jsx)("div",{className:"row m-t-20 ",id:"min-max-bet-div",children:(0,j.jsx)("div",{className:"col-md-12 overflow-x-scroll",children:(0,j.jsxs)("table",{className:"table table-striped table-borderedddd",children:[(0,j.jsx)("thead",{className:" ".concat("sadmin"===Y?"d-":"d-none"),children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{}),null===(a=I.sports)||void 0===a?void 0:a.map((e=>1===e.sportId||2===e.sportId||4===e.sportId?(0,j.jsx)("th",{children:"Cricket"===e.name?"Casino ":"Soccer"===e.name?"Match":"Tennis"===e.name?"Fancy ":""},e._id):(0,j.jsx)("th",{},e._id)))]})}),(0,j.jsxs)("tbody",{children:[(0,j.jsxs)("tr",{className:" ".concat("sadmin"===Y?"d-":"d-none"),children:[(0,j.jsx)("td",{}),null===(c=I.sports)||void 0===c?void 0:c.map((e=>{var s;let{_id:a,sportId:r}=e;return 1==r||2==r||4==r?(0,j.jsx)("td",{id:"minbet",children:null===X||void 0===X||null===(s=X.userSetting)||void 0===s?void 0:s[r].minBet},a):(0,j.jsx)("td",{},a)}))]}),(0,j.jsxs)("tr",{className:" ".concat("sadmin"===Y?"d":"d-none"),children:[(0,j.jsx)("td",{children:"Provide Min Bet"}),null===(N=I.sports)||void 0===N?void 0:N.map((e=>{var s,a;let{_id:l,sportId:d}=e;return 1==d||2==d||4==d?(0,j.jsxs)("td",{children:[(0,j.jsx)("input",(0,r.A)((0,r.A)({id:"minbet.".concat(d),className:"minbet.".concat(d)},G("minbet.".concat(d))),{},{placeholder:"",max:null===X||void 0===X||null===(s=X.userSetting)||void 0===s?void 0:s[d].minBet,min:0,defaultValue:null===X||void 0===X||null===(a=X.userSetting)||void 0===a?void 0:a[d].minBet,disabled:V,type:"number"})),(0,j.jsx)("span",{className:"error"})]},l):(0,j.jsx)("td",{},l)}))]}),(0,j.jsxs)("tr",{className:" ".concat("sadmin"===Y?"d-":"d-none"),children:[(0,j.jsx)("td",{children:"Max Bet"}),null===(f=I.sports)||void 0===f?void 0:f.map((e=>{var s;let{_id:a,sportId:r}=e;return 1==r||2==r||4==r?(0,j.jsx)("td",{id:"maxbet",children:null===X||void 0===X||null===(s=X.userSetting)||void 0===s?void 0:s[r].maxBet},a):(0,j.jsx)("td",{},a)}))]}),(0,j.jsxs)("tr",{className:" ".concat("sadmin"===Y?"d-":"d-none"),children:[(0,j.jsx)("td",{children:"Provide Min Bet"}),null===(g=I.sports)||void 0===g?void 0:g.map((e=>{var s,a;let{_id:l,sportId:d}=e;return 1==d||2==d||4==d?(0,j.jsxs)("td",{children:[(0,j.jsx)("input",(0,r.A)((0,r.A)({id:"maxbet.".concat(d),className:"maxbet.".concat(d)},G("maxbet.".concat(d))),{},{placeholder:"",max:null===X||void 0===X||null===(s=X.userSetting)||void 0===s?void 0:s[d].maxBet,defaultValue:null===X||void 0===X||null===(a=X.userSetting)||void 0===a?void 0:a[d].maxBet,disabled:V,min:0,type:"number"})),(0,j.jsx)("span",{className:"error"})]},l):(0,j.jsx)("td",{},l)}))]}),(0,j.jsxs)("tr",{className:" ".concat("sadmin"===Y?"d":"d-none"),children:[(0,j.jsx)("td",{children:"Delay"}),null===(A=I.sports)||void 0===A?void 0:A.map((e=>{var s;let{_id:a,sportId:r}=e;return 1==r||2==r||4==r?(0,j.jsx)("td",{id:"delay",children:null===X||void 0===X||null===(s=X.userSetting)||void 0===s?void 0:s[r].delay},a):(0,j.jsx)("td",{},a)}))]}),(0,j.jsxs)("tr",{className:" ".concat("sadmin"===Y?"":"d-none"),children:[(0,j.jsx)("td",{children:"Provide Delay"}),null===(y=I.sports)||void 0===y?void 0:y.map((e=>{var s,a;let{_id:l,sportId:d}=e;return 1==d||2==d||4==d?(0,j.jsxs)("td",{children:[(0,j.jsx)("input",(0,r.A)((0,r.A)({id:"delay.".concat(d),className:"delay.".concat(d)},G("delay.".concat(d))),{},{placeholder:"",max:null===X||void 0===X||null===(s=X.userSetting)||void 0===s?void 0:s[d].delay,defaultValue:null===X||void 0===X||null===(a=X.userSetting)||void 0===a?void 0:a[d].delay,disabled:V,type:"number"})),(0,j.jsx)("span",{className:"error"})]},l):(0,j.jsx)("td",{},l)}))]})]})]})})}),(0,j.jsx)("div",{className:"row m-t-20",children:(0,j.jsx)("div",{className:"col-md-12"})}),(0,j.jsx)("div",{className:"row m-t-20",children:(0,j.jsx)("div",{className:"col-md-12",children:(0,j.jsx)("div",{className:"float-right",children:(0,j.jsx)(v.A,{className:"btn btn-submit",type:"submit",disabled:E,children:E?"Creating...":"Create User"})})})})]})]})})})})})}},8306:(e,s,a)=>{a.d(s,{A:()=>o});var r=a(4919),l=a(9222),d=(a(9950),a(6487)),n=a(8674),i=a(4414);const t=["children"],o=e=>{const{children:s}=e,a=(0,l.A)(e,t),o=(0,n.G)(d.Mm);return(0,i.jsx)("button",(0,r.A)((0,r.A)({disabled:o},a),{},{children:s}))}},8783:(e,s,a)=>{var r=a(2392);s.A=void 0;var l=r(a(9526)),d=a(4414);s.A=(0,l.default)((0,d.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd")}}]);