"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[3120],{381:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(9950),n=a(2509),l=a.n(n),i=a(4414);const d=(0,s.forwardRef)(((e,t)=>{let{onSuggestionsFetchRequested:a,onSelectUser:n,placeHolder:d,onSuggestionsClear:c}=e;const[r,o]=s.useState(""),[u,h]=s.useState([]),m={placeholder:d||"Search User",value:r,onChange:(e,t)=>{let{newValue:a}=t;o(a)}};return(0,s.useImperativeHandle)(t,(()=>({resetValue(){o(""),h([])}})),[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l(),{suggestions:u,onSuggestionsFetchRequested:e=>{let{value:t}=e;o(t),a({value:t}).then((e=>{h(e.data.data)}))},onSuggestionsClearRequested:()=>{},getSuggestionValue:e=>(n(e),e.username),renderSuggestion:e=>(0,i.jsx)("div",{className:"dropdown-item",children:e.username}),inputProps:m,theme:{suggestionsList:"dropdown-menu show",input:"mx-input",suggestionsContainer:"dropdown"}})})}))},3120:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(4919),n=a(9051),l=a.n(n),i=a(9950),d=a(9198),c=a.n(d),r=a(7232),o=a(4446),u=a(1925),h=a(1377),m=a(9564),x=a(381),g=a(8538),p=a(4806),j=a.n(p),v=a(2318),b=a(8674),N=a(6487),f=(a(4129),a(8429)),w=a(9402),S=a(4414);const y=()=>{const e=(0,b.G)(N.Mm),t=(0,f.g)().name,[a,n]=i.useState({}),[d,p]=i.useState([]),[y,k]=i.useState([]),[A,C]=i.useState(0),[D,L]=i.useState([]),[B,F]=i.useState(0),[R]=i.useState(50),[Y,_]=i.useState(0),[E,I]=i.useState(!1),[M,q]=i.useState({}),[T,V]=i.useState({}),[U,H]=i.useState(0),[O,P]=i.useState({startDate:"",endDate:"",reportType:"All",userId:""}),[G,$]=i.useState(1),[z,W]=i.useState(1);i.useEffect((()=>{const e=B+R;L(d.slice(B,e)),_(Math.ceil(d.length/R))}),[B,R,d]),i.useEffect((()=>{g.A.lenadena().then((e=>{k(e.data.data),console.log(e,"res for lena dena jai hind !")}))}),[]);i.useEffect((()=>{const e=O;e.startDate=l()().subtract(70,"days").format("YYYY-MM-DD"),e.endDate=l()().format("YYYY-MM-DD"),P(e)}),[]);const J=e=>{o.A.getAccountList(e,O).then((t=>{var a,s,i,d,c,r,o,h,m,x,g;null!==t&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.data&&n((null===t||void 0===t||null===(s=t.data)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.items)||[]),null!==t&&void 0!==t&&null!==(d=t.data)&&void 0!==d&&null!==(c=d.data)&&void 0!==c&&c.items&&0==e&&H((null===t||void 0===t||null===(r=t.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.openingBalance)||0),p(((e,t)=>{const a=[];return e&&e.map(((e,s)=>{t+=e.amount,a.push({_id:e._id,sr_no:s+1,date:l()(e.createdAt).format(u.i$),credit:e.amount,debit:e.amount,closing:t.toFixed(2),narration:e.narration,type:e.type,stmt:e})})),a})((null===t||void 0===t||null===(h=t.data)||void 0===h||null===(m=h.data)||void 0===m?void 0:m.items)||[],(null===t||void 0===t||null===(x=t.data)||void 0===x||null===(g=x.data)||void 0===g?void 0:g.openingBalance)||0)),$(e)})).catch((e=>{console.log(e),r.oR.error("error")}))},K=e=>{const t=O;t[e.target.name]=e.target.value,P(t)},Q=()=>{J(1)};i.useEffect((()=>{t&&P((0,s.A)((0,s.A)({},O),{},{userId:t}))}),[t]),i.useEffect((()=>{O.userId&&Q()}),[O.userId]);i.useEffect((()=>{E&&X(T,z)}),[T,z,E]);const X=(e,t)=>{var a;const s=null===e||void 0===e||null===(a=e.allBets)||void 0===a?void 0:a.map((e=>{let{betId:t}=e;return t}));s&&s.length>0&&g.A.getBetListByIds(s,t).then((e=>{I(!0),q(e.data.data),W(t)}))};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"container-fluid p-4",children:(0,S.jsxs)("div",{className:"row",children:[(0,S.jsxs)("div",{style:{background:"pink"},className:"bg-grey flex item-center justify-between px-5 py-3 gx-bg-flex",children:[(0,S.jsx)("span",{className:"text-2xl font-weight-normal gx-text-white gx-align-items-center gx-pt-1 gx-text-capitalize",children:"List Of All Transactions"}),(0,S.jsx)(w.A,{to:"/",type:"button",className:"btn bg-primary",children:(0,S.jsx)("span",{children:"Back"})})]}),(0,S.jsxs)("div",{className:h.Fr?"col-md-12 padding-custom":"col-md-12 mt-1",children:[(0,S.jsx)("div",{className:"card-body p15 bg-gray mb-20",children:(0,S.jsx)("form",{className:"ng-pristine ng-valid ng-touched mb-0",method:"post",onSubmit:e=>{e.preventDefault(),Q()},children:(0,S.jsxs)("div",{className:"row row2",children:[(0,S.jsxs)("div",{className:"col-6 col-lg-2 mbc-5 d-none",children:[(0,S.jsx)("label",{className:"label",children:"User"}),(0,S.jsx)(x.A,{onSuggestionsFetchRequested:e=>{let{value:t}=e;return m.A.getUserListSuggestion({username:t})}})]}),(0,S.jsx)("div",{className:"col-6 col-lg-2 mbc-5 ",children:(0,S.jsxs)("div",{className:"form-group mb-0",children:[(0,S.jsx)("label",{className:"label",children:"Start Date"}),(0,S.jsx)("div",{className:"mx-datepicker",children:(0,S.jsx)("div",{className:"mx-input-wrapper",children:(0,S.jsx)("input",{name:"startDate",type:"date",autoComplete:"off",onChange:K,defaultValue:O.startDate,placeholder:"Select Date",className:"mx-input ng-pristine ng-valid ng-touched"})})})]})}),(0,S.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,S.jsxs)("div",{className:"form-group mb-0",children:[(0,S.jsx)("label",{className:"label",children:"End Date"}),(0,S.jsx)("div",{className:"mx-datepicker",children:(0,S.jsx)("div",{className:"mx-input-wrapper",children:(0,S.jsx)("input",{name:"endDate",type:"date",autoComplete:"off",defaultValue:O.endDate,onChange:K,placeholder:"Select Date",className:"mx-input ng-untouched ng-pristine ng-valid"})})})]})}),(0,S.jsx)("div",{className:"col-12 col-lg-2 mbc-5",children:(0,S.jsxs)("div",{className:"form-group mb-0",children:[(0,S.jsx)("label",{className:"label",children:"Type"}),(0,S.jsxs)("select",{name:"reportType",onChange:K,className:"custom-select ng-untouched ng-pristine ng-valid",children:[(0,S.jsx)("option",{value:"ALL",children:"All "}),(0,S.jsx)("option",{value:"chip",children:"Deposit/Withdraw "}),(0,S.jsx)("option",{value:"game",children:"Game Report "})]})]})}),(0,S.jsxs)("div",{className:"col-12 col-lg-1 mbc-5",children:[(0,S.jsx)("label",{className:"label",children:"\xa0"}),(0,S.jsx)("button",{type:"submit",className:"btn bg-primary btn-block",children:"Submit"})]})]})})}),(0,S.jsxs)("div",{className:"card-body",children:[(0,S.jsx)("div",{className:"table-responsive",children:(0,S.jsxs)("table",{className:"text-center",id:"customers1",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{style:{width:"10%",background:"pink",textAlign:"center",whiteSpace:"nowrap"},children:"Sr No."}),(0,S.jsxs)("th",{style:{width:"20%",background:"pink",textAlign:"center",whiteSpace:"nowrap"},children:["Date"," "]}),(0,S.jsx)("th",{style:{width:"10%",background:"pink",textAlign:"center"},children:"Credit "}),(0,S.jsx)("th",{style:{width:"10%",background:"pink",textAlign:"center"},children:"Debit"}),(0,S.jsx)("th",{style:{width:"10%",background:"pink",textAlign:"center"},children:"Balance"}),(0,S.jsx)("th",{style:{width:"10%",background:"pink",textAlign:"center"},children:"From"}),(0,S.jsx)("th",{style:{width:"45%",background:"pink",textAlign:"center"},children:"Remark"})]})}),(0,S.jsxs)("tbody",{children:[d.length<=0||d.length>0&&d.length<=0&&(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:8,className:"text-center",children:"No Result Found"})}),d.length>0&&d.length>0&&0==G&&(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:"-"}),(0,S.jsx)("td",{className:"wnwrap",children:l()(d[0].createdAt).format(u.i$)}),(0,S.jsx)("td",{children:"-"}),(0,S.jsx)("td",{children:"-"}),(0,S.jsx)("td",{className:"wnwrap",children:U}),(0,S.jsx)("td",{className:"wnwrap",children:"Opening Balance"})]},d[0]._id),(()=>{let e=1==G?U:A;return D&&D.map(((t,a)=>(e+=t.amount,(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{children:t.sr_no}),(0,S.jsx)("td",{className:"wnwrap",children:t.date}),(0,S.jsx)("td",{className:"green wnwrap",children:t.credit>=0&&t.credit.toFixed(2)}),(0,S.jsx)("td",{className:"red wnwrap",children:t.credit<0&&t.credit.toFixed(2)}),(0,S.jsx)("td",{className:"green wnwrap",children:t.closing}),(0,S.jsx)("td",{children:t.stmt.txnBy}),(0,S.jsx)("td",{onClick:e=>((e,t)=>{e.preventDefault(),q({}),V(t),W(1),I(!0)})(e,t.stmt),children:(0,S.jsx)("span",{className:"pnl"==t.type?"label-buttonccc":"",children:t.narration})})]},"".concat(t._id).concat(a)))))})()]})]})}),(0,S.jsx)(c(),{breakLabel:"...",nextLabel:">",onPageChange:e=>{const t=e.selected*R%d.length;F(t),$(e.selected)},pageRangeDisplayed:5,pageCount:Y,containerClassName:"pagination",activeClassName:"active",previousLabel:"<",breakClassName:"break-me"})]})]})]})}),(0,S.jsx)(j(),{isOpen:E,onAfterClose:()=>I(!1),onRequestClose:e=>{I(!1)},contentLabel:"Set Max Bet Limit",className:"col-md-12",ariaHideApp:!1,children:(0,S.jsxs)("div",{className:"modal-content",children:[(0,S.jsxs)("div",{className:"modal-header",children:[(0,S.jsx)("h5",{children:"Bets"}),(0,S.jsx)("button",{onClick:()=>I(!1),className:"close float-right",children:(0,S.jsx)("i",{className:"fa fa-times-circle"})})]}),(0,S.jsx)("div",{className:"modal-body",children:!e&&(0,S.jsx)(v.A,{bethistory:M,handlePageClick:e=>{X(T,e.selected+1)},page:G,isTrash:!1})})]})})]})}},4129:()=>{}}]);