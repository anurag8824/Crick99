"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[3893],{663:()=>{},3893:(t,e,l)=>{l.r(e),l.d(e,{default:()=>N});var n=l(9051),s=l.n(n),i=l(9950),a=l(7232),d=l(4446),r=l(1377),o=l(8538),c=l(4806),h=l.n(c),u=l(2318),m=l(8674),v=l(6487),x=l(9198),j=l.n(x),g=(l(663),l(4414));const N=()=>{const t=(0,m.G)(v.Mm),[e,l]=i.useState([]),[n,c]=i.useState([]),[x,N]=i.useState(!1),[p,f]=i.useState({}),[A,b]=i.useState({}),[y,Y]=i.useState(1),[M,S]=i.useState(0),[D,B]=i.useState(0),[w,C]=i.useState({startDate:"",endDate:"",reportType:"All"}),[k,E]=i.useState(0),[F,L]=(0,i.useState)([]),[I,O]=(0,i.useState)(0),[R,_]=(0,i.useState)(0),[T]=(0,i.useState)(50);i.useEffect((()=>{const t=w;t.startDate=s()().subtract(7,"days").format("YYYY-MM-DD"),t.endDate=s()().format("YYYY-MM-DD"),C(t),P(0)}),[]),i.useEffect((()=>{const t=R+T;L(n.slice(R,t)),O(Math.ceil(n.length/T))}),[R,T,n]);const P=t=>{d.A.getAccountList(t,w).then((e=>{var n,s,i,a,d,r,o,h,u,m,v;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data&&l((null===e||void 0===e||null===(s=e.data)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.items)||[]),null!==e&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&null!==(d=a.data)&&void 0!==d&&d.items&&0==t&&S((null===e||void 0===e||null===(r=e.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.openingBalance)||0),c(U((null===e||void 0===e||null===(h=e.data)||void 0===h||null===(u=h.data)||void 0===u?void 0:u.items)||[],(null===e||void 0===e||null===(m=e.data)||void 0===m||null===(v=m.data)||void 0===v?void 0:v.openingBalance)||0)),E(t)})).catch((t=>{console.log(t),a.oR.error("error")}))};i.useEffect((()=>{x&&H(A,y)}),[A,y,x]);const H=(t,e)=>{const l=[],n=(null===t||void 0===t?void 0:t.allBets)||[];if(n.length>0){n.map((t=>{l.push(t.betId)}));const t=l;o.A.getBetListByIds(t,e).then((t=>{f(t.data.data),Y(e)}))}},[z,K]=(0,i.useState)(null),U=(t,e)=>{const l=[];return t&&t.map(((t,n)=>{e+=t.amount,l.push({_id:t._id,sr_no:n+1,date:s()(t.createdAt).format("lll"),credit:t.amount,debit:t.amount,closing:e.toFixed(2),narration:t.narration,stmt:t})})),l};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:r.Fr?"padding-custom":" mt-1",children:(0,g.jsxs)("div",{className:"body-wrap",children:[(0,g.jsx)("div",{className:"back-main-menu my-3",children:(0,g.jsx)("a",{href:"/",children:"BACK TO MAIN MENU"})}),(0,g.jsx)("h2",{className:"text-center",children:"My Ledger"}),(0,g.jsx)("div",{className:"",children:(0,g.jsxs)("div",{className:"card-body p0",children:[z?(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"match-name text-center ng-binding",children:z}),(0,g.jsx)("div",{className:"table-responsive",children:(0,g.jsxs)("table",{className:"text-center",id:"customers1",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{style:{width:"45%",textAlign:"center"},children:"Event ID"}),(0,g.jsx)("th",{style:{width:"45%",textAlign:"center"},children:"Number"}),(0,g.jsx)("th",{style:{width:"45%",textAlign:"center"},children:"Rate"}),(0,g.jsx)("th",{style:{width:"45%",textAlign:"center"},children:"Amount"}),(0,g.jsx)("th",{style:{width:"45%",textAlign:"center"},children:"Status"}),(0,g.jsx)("th",{style:{width:"45%",textAlign:"center"},children:"Result"}),(0,g.jsxs)("th",{style:{width:"10%",textAlign:"center"},children:["PL"," "]}),(0,g.jsx)("th",{className:"d-none",style:{width:"10%",textAlign:"center"},children:"BALANCE"})]})}),(0,g.jsxs)("tbody",{children:[n.length<=0||n.length>0&&n.length<=0&&(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:8,className:"text-center",children:"No Result Found"})}),n.length>0&&n.length>0&&0==k&&(0,g.jsx)("tr",{},n[0]._id),(()=>{let t=1===k?M:D,e=0;const l=null===F||void 0===F?void 0:F.filter((t=>{var e;if(null===t||void 0===t||!t.narration)return!1;const l=null===(e=t.narration.split(" /")[0])||void 0===e?void 0:e.trim(),n=s()(t.date,"MMM DD, YYYY hh:mm A").format("YYYY-MM-DD");return z===l+n})),n=null===l||void 0===l?void 0:l.map(((l,n)=>{var s,i,a,d,r,o,c,h,u,m,v,x,j,N,p,f,A,b,y,Y,M;t+=l.amount;const S=null===l||void 0===l?void 0:l.credit,D=parseFloat(S)||0;return e+=D,0===l.narration.length?null:(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:null!==l&&void 0!==l&&null!==(s=l.stmt)&&void 0!==s&&s.allBets?null===l||void 0===l||null===(i=l.stmt)||void 0===i?void 0:i.selectionId:""}),(0,g.jsx)("td",{children:null!==l&&void 0!==l&&null!==(a=l.stmt)&&void 0!==a&&a.allBets?null===l||void 0===l||null===(d=l.stmt)||void 0===d||null===(r=d.allBets[0])||void 0===r||null===(o=r.result[0])||void 0===o?void 0:o.marketName:""}),(0,g.jsx)("td",{children:null!==l&&void 0!==l&&null!==(c=l.stmt)&&void 0!==c&&c.allBets?null===l||void 0===l||null===(h=l.stmt)||void 0===h||null===(u=h.allBets[0])||void 0===u||null===(m=u.result[0])||void 0===m?void 0:m.odds:""}),(0,g.jsx)("td",{children:null!==l&&void 0!==l&&null!==(v=l.stmt)&&void 0!==v&&v.allBets?l.stmt.allBets.reduce(((t,e)=>{var l,n;return t+(parseFloat(null===e||void 0===e||null===(l=e.result)||void 0===l||null===(n=l[0])||void 0===n?void 0:n.stack)||0)}),0):""}),(0,g.jsx)("td",{children:null!==l&&void 0!==l&&null!==(x=l.stmt)&&void 0!==x&&x.allBets?null===l||void 0===l||null===(j=l.narration)||void 0===j||null===(N=j.match(/,([^[]+)\[/))||void 0===N||null===(p=N[1])||void 0===p?void 0:p.trim():""}),(0,g.jsx)("td",{children:null!==l&&void 0!==l&&null!==(f=l.stmt)&&void 0!==f&&f.allBets?null===l||void 0===l||null===(A=l.narration)||void 0===A||null===(b=A.match(/winner:\s*([^,\[\]]+)?/))||void 0===b||null===(y=b[1])||void 0===y?void 0:y.trim():""}),(0,g.jsx)("td",{children:null!==l&&void 0!==l&&null!==(Y=l.stmt)&&void 0!==Y&&Y.allBets?null===l||void 0===l?void 0:l.credit:""}),(0,g.jsx)("td",{className:"green wnwrap d-none",children:null!==l&&void 0!==l&&null!==(M=l.stmt)&&void 0!==M&&M.allBets?l.closing:""})]},"".concat(l._id).concat(n))}));return(0,g.jsxs)(g.Fragment,{children:[n,(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:8,children:(0,g.jsxs)("strong",{className:"".concat(e<0?"total2":"total"),children:["You ",e<0?"lost":"won"," ",e.toFixed(2)," coins"]})})})]})})()]})]})})]}):(0,g.jsx)("div",{className:"table-responsive",children:(0,g.jsxs)("table",{className:"text-center",id:"customers1",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"d-none",style:{width:"45%",textAlign:"center"},children:"MATCH NAME"}),(0,g.jsx)("th",{style:{width:"45%",textAlign:"center"},children:"DESCRIPTION"}),(0,g.jsx)("th",{style:{width:"45%",textAlign:"center"},children:"WON BY"}),(0,g.jsxs)("th",{style:{width:"10%",textAlign:"center"},children:["WIN"," "]}),(0,g.jsx)("th",{style:{width:"10%",textAlign:"center"},children:"LOSS"}),(0,g.jsx)("th",{style:{width:"10%",textAlign:"center"},children:"HISAB"})]})}),(0,g.jsxs)("tbody",{children:[n.length<=0||n.length>0&&n.length<=0&&(0,g.jsx)("tr",{children:(0,g.jsx)("td",{colSpan:8,className:"text-center",children:"No Result Found"})}),n.length>0&&n.length>0&&0==k&&(0,g.jsx)("tr",{},n[0]._id),(()=>{let t={};console.log(F,"drrerer"),null===F||void 0===F||F.forEach((e=>{var l,n;if(null===e||void 0===e||!e.narration||null===e||void 0===e||null===(l=e.stmt)||void 0===l||!l.allBets)return;const i=null===(n=e.narration.split(" /")[0])||void 0===n?void 0:n.trim(),a=s()(e.date,"MMM DD, YYYY hh:mm A").format("YYYY-MM-DD");t[i]||(t[i]={}),t[i][a]||(t[i][a]=[]),t[i][a].push(e)}));const e=[];let l=0;return Object.entries(t).flatMap((t=>{let[e,l]=t;return Object.entries(l).map((t=>{let[l,n]=t;return{gameName:e,date:l,stmts:n,sortDate:s()(l).format("YYYY-MM-DD")}}))})).sort(((t,e)=>s()(t.sortDate).diff(s()(e.sortDate)))).forEach((t=>{let{gameName:n,date:s,stmts:i}=t,a=0,d=0;i.forEach((t=>{a+=t.credit,d+=t.credit})),l+=a,e.unshift((0,g.jsxs)("tr",{children:[(0,g.jsxs)("td",{className:"custom-link",onClick:()=>K(n+s),style:{cursor:"pointer",color:"#007bff",textDecoration:"underline"},children:[n,"(",s,")"]}),(0,g.jsx)("td",{children:(0,g.jsxs)("span",{className:"badge badge-primary p-1 ng-binding",style:{fontSize:"xx-small"},children:[(0,g.jsx)("i",{style:{fontSize:"10px"},className:"fas fa-trophy"})," N/A"]})}),(0,g.jsx)("td",{className:"green",children:a>=0?a.toFixed(2):"0.00"}),(0,g.jsx)("td",{className:"red",children:d<0?d.toFixed(2):"0.00"}),(0,g.jsx)("td",{className:"green",children:l.toFixed(2)})]},"".concat(n,"-").concat(s)))})),e})()]})]})}),(0,g.jsx)(j(),{breakLabel:"...",nextLabel:">>",onPageChange:t=>{const e=t.selected*T%n.length;_(e),E(t.selected)},pageRangeDisplayed:5,pageCount:I,containerClassName:"pagination",activeClassName:"active",previousLabel:"<<",breakClassName:"break-me"})]})}),(0,g.jsx)("div",{className:"back-main-menu my-2",children:(0,g.jsx)("a",{href:"/",children:"BACK TO MAIN MENU"})})]})}),(0,g.jsx)(h(),{isOpen:x,onAfterClose:()=>N(!1),onRequestClose:t=>{N(!1)},contentLabel:"Set Max Bet Limit",className:"col-md-12",ariaHideApp:!1,children:(0,g.jsxs)("div",{className:"modal-content",children:[(0,g.jsxs)("div",{className:"modal-header",children:[(0,g.jsx)("h5",{children:"Bets"}),(0,g.jsx)("button",{onClick:()=>N(!1),className:"close float-right",children:(0,g.jsx)("i",{className:"fa fa-times-circle"})})]}),(0,g.jsx)("div",{className:"modal-body",children:!t&&(0,g.jsx)(u.A,{bethistory:p,handlePageClick:t=>{H(A,t.selected+1)},page:k,isTrash:!1})})]})})]})}}}]);