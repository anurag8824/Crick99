"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[2066],{381:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(9950),l=t(2509),c=t.n(l),r=t(4414);const n=(0,a.forwardRef)(((e,s)=>{let{onSuggestionsFetchRequested:t,onSelectUser:l,placeHolder:n,onSuggestionsClear:d}=e;const[o,i]=a.useState(""),[m,u]=a.useState([]),h={placeholder:n||"Search User",value:o,onChange:(e,s)=>{let{newValue:t}=s;i(t)}};return(0,a.useImperativeHandle)(s,(()=>({resetValue(){i(""),u([])}})),[]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c(),{suggestions:m,onSuggestionsFetchRequested:e=>{let{value:s}=e;i(s),t({value:s}).then((e=>{u(e.data.data)}))},onSuggestionsClearRequested:()=>{},getSuggestionValue:e=>(l(e),e.username),renderSuggestion:e=>(0,r.jsx)("div",{className:"dropdown-item",children:e.username}),inputProps:h,theme:{suggestionsList:"dropdown-menu show",input:"mx-input",suggestionsContainer:"dropdown"}})})}))},2066:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var a=t(4919),l=t(9950),c=t(7232),r=t(9564),n=t(9051),d=t.n(n),o=t(4552),i=t(1377),m=t(381),u=t(8674),h=t(3170),p=t(8538),g=t(2318),b=t(4137),x=t(8429),j=t(4635),v=t(387),N=t(4414);const f=e=>{var s;let{hideHeader:t,matchId:n}=e;const[f,S]=l.useState({}),y=(0,x.g)(),[A,D]=l.useState({status:"pending",type:y.type,matchId:n}),w=(0,u.G)(h.rt),[C,Y]=l.useState(1),[k,R]=l.useState(!1),[I,U]=l.useState(!1),_=(0,u.G)(v.Qg),{socketUser:M}=(0,b.E$)(),F=l.useRef(null);l.useEffect((()=>{const e=A;n||(e.startDate=d()().subtract(7,"days").format("YYYY-MM-DD"),e.endDate=d()().format("YYYY-MM-DD")),D(e),B(C)}),[]),l.useEffect((()=>{const e=A;n||(e.startDate=d()().subtract(7,"days").format("YYYY-MM-DD"),e.endDate=d()().format("YYYY-MM-DD")),e.type=y.type,D(e),B(C)}),[y.type]),l.useEffect((()=>{k&&(B(1),R(!1))}),[k]);const B=e=>{r.A.getUsercompletedbets(e,A).then((s=>{s&&s.data&&s.data.data&&S(s.data.data),Y(e)})).catch((e=>{const s=e.response.data.message;c.oR.error(s)}))},E=e=>{D((0,a.A)((0,a.A)({},A),{},{[e.target.name]:e.target.value}))};return console.log(w,"spoers list"),(0,N.jsxs)(N.Fragment,{children:[!t&&o.A.subheaderdesktopadmin("deleted"==y.type?"Deleted Bet History":"Unsettled Bet History"),(0,N.jsx)("div",{className:"container-fluid",children:(0,N.jsx)("div",{className:"row",children:(0,N.jsx)("div",{className:i.Fr?"col-md-12 padding-custom":"col-md-12 mt-1",children:(0,N.jsxs)("div",{className:"",children:[(0,N.jsx)("div",{className:"card-body p15 bg-gray mb-20",children:(0,N.jsx)("form",{className:"ng-pristine ng-valid ng-touched mb-0",method:"post",onSubmit:e=>{e.preventDefault(),R(!0)},children:(0,N.jsxs)("div",{className:"row row5",children:[(0,N.jsxs)("div",{className:"col-6 col-lg-2 mbc-5",children:[(0,N.jsx)("label",{className:"label",children:"User"}),(0,N.jsx)(m.A,{onSuggestionsFetchRequested:e=>{let{value:s}=e;return r.A.getUserListSuggestion({username:s})},onSelectUser:e=>{D((0,a.A)((0,a.A)({},A),{},{userId:e._id}))},ref:F})]}),(0,N.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,N.jsxs)("div",{className:"form-group mb-0",children:[(0,N.jsx)("label",{className:"label",children:"Search By Name"}),(0,N.jsx)("input",{type:"text",className:"mx-input",name:"name",onChange:E,placeholder:"Search By Name"})]})}),(0,N.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,N.jsxs)("div",{className:"form-group mb-0",children:[(0,N.jsx)("label",{className:"label",children:"Sport"}),(0,N.jsxs)("select",{name:"reportType",onChange:E,className:"custom-select ng-untouched ng-pristine ng-valid",children:[(0,N.jsx)("option",{value:"",children:"Select Sport"}),w.sports.filter((e=>4===e.sportId)).map((e=>(0,N.jsxs)("option",{value:e.sportId,children:[e.name," "]},e.sportId)))]})]})}),(0,N.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,N.jsxs)("div",{className:"form-group mb-0",children:[(0,N.jsx)("label",{className:"label",children:"Start Date"}),(0,N.jsx)("div",{className:"mx-datepicker",children:(0,N.jsx)("div",{className:"mx-input-wrapper",children:(0,N.jsx)("input",{name:"startDate",type:"datetime-local",autoComplete:"off",onChange:E,defaultValue:A.startDate,placeholder:"Select Date",className:"mx-input ng-pristine ng-valid ng-touched"})})})]})}),(0,N.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,N.jsxs)("div",{className:"form-group mb-0",children:[(0,N.jsx)("label",{className:"label",children:"End Date"}),(0,N.jsx)("div",{className:"mx-datepicker",children:(0,N.jsx)("div",{className:"mx-input-wrapper",children:(0,N.jsx)("input",{name:"endDate",type:"datetime-local",autoComplete:"off",defaultValue:A.endDate,onChange:E,placeholder:"Select Date",className:"mx-input ng-untouched ng-pristine ng-valid"})})})]})}),(0,N.jsxs)("div",{className:"col-12 col-lg-1 mbc-5",children:[(0,N.jsx)("label",{className:"label",children:"\xa0"}),(0,N.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit"})]}),(0,N.jsxs)("div",{className:"col-12 col-lg-1 mbc-5",children:[(0,N.jsx)("label",{className:"label",children:"\xa0"}),(0,N.jsx)("button",{type:"button",onClick:()=>{F.current.resetValue(),D({status:"pending"}),R(!0)},className:"btn btn-primary btn-block",children:"Reset"})]}),(null===_||void 0===_||null===(s=_.user)||void 0===s?void 0:s.role)===j.T.admin&&(0,N.jsxs)("div",{className:"col-12 col-lg-1 mbc-5",children:[(0,N.jsx)("label",{className:"label",children:"\xa0"}),(0,N.jsx)("button",{type:"button",onClick:()=>{const e=f.docs.reduce(((e,s)=>(s.selected&&(e=!0),e)),!1);if(I||e){const e=f.docs.filter((e=>e.selected)).map((e=>e._id));e.length>0&&p.A.deleteBets({ids:e}).then((e=>{e.data.data.success&&(S((0,a.A)((0,a.A)({},f),{},{docs:f.docs.filter((e=>!e.selected))})),U(!1),c.oR.success(e.data.message))}))}else c.oR.error("Please select one item")},className:"btn btn-primary btn-block",children:"Delete"})]})]})})}),(0,N.jsx)("div",{className:"card-body",children:(0,N.jsx)(g.A,{bethistory:f,handlePageClick:e=>{B(e.selected+1)},onTrash:(e,s)=>{if(e.preventDefault(),!s._id)return void c.oR.error("Invalid bet data. Unable to delete.");window.confirm("Are you sure you want to delete?")&&p.A.deleteCurrentBet(s._id).then((e=>{const{success:t,message:l}=e.data.data;t?(M.emit("betDelete",{betId:s._id,userId:s.userId}),c.oR.success(l),S((e=>(0,a.A)((0,a.A)({},e),{},{docs:e.docs.filter((e=>{let{_id:t}=e;return t!==s._id}))})))):c.oR.error("Failed to delete bet.")})).catch((e=>{console.error("Error deleting bet:",e),c.oR.error("An error occurred while deleting the bet.")}))},page:C,isTrash:!0,handleSelectAll:()=>{U(!I);const e=f.docs.map((e=>(0,a.A)((0,a.A)({},e),{},{selected:!I})));S((0,a.A)((0,a.A)({},f),{},{docs:e}))},selectAll:I,handleSelectItem:e=>{const s=f.docs.map((s=>s===e?(0,a.A)((0,a.A)({},s),{},{selected:!s.selected}):s));S((0,a.A)((0,a.A)({},f),{},{docs:s}))}})})]})})})})]})}}}]);