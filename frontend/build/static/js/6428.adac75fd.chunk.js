(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[2066,6428],{381:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(9950),l=s(2509),c=s.n(l),n=s(4414);const i=(0,a.forwardRef)(((e,t)=>{let{onSuggestionsFetchRequested:s,onSelectUser:l,placeHolder:i,onSuggestionsClear:r}=e;const[d,o]=a.useState(""),[m,h]=a.useState([]),u={placeholder:i||"Search User",value:d,onChange:(e,t)=>{let{newValue:s}=t;o(s)}};return(0,a.useImperativeHandle)(t,(()=>({resetValue(){o(""),h([])}})),[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(c(),{suggestions:m,onSuggestionsFetchRequested:e=>{let{value:t}=e;o(t),s({value:t}).then((e=>{h(e.data.data)}))},onSuggestionsClearRequested:()=>{},getSuggestionValue:e=>(l(e),e.username),renderSuggestion:e=>(0,n.jsx)("div",{className:"dropdown-item",children:e.username}),inputProps:u,theme:{suggestionsList:"dropdown-menu show",input:"mx-input",suggestionsContainer:"dropdown"}})})}))},2066:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(4919),l=s(9950),c=s(7232),n=s(9564),i=s(9051),r=s.n(i),d=s(4552),o=s(1377),m=s(381),h=s(8674),u=s(3170),v=s(8538),x=s(2318),p=s(4137),j=s(8429),b=s(4635),f=s(387),g=s(4414);const N=e=>{var t;let{hideHeader:s,matchId:i}=e;const[N,k]=l.useState({}),y=(0,j.g)(),[I,M]=l.useState({status:"pending",type:y.type,matchId:i}),_=(0,h.G)(u.rt),[S,w]=l.useState(1),[F,A]=l.useState(!1),[B,D]=l.useState(!1),R=(0,h.G)(f.Qg),{socketUser:T}=(0,p.E$)(),C=l.useRef(null);l.useEffect((()=>{const e=I;i||(e.startDate=r()().subtract(7,"days").format("YYYY-MM-DD"),e.endDate=r()().format("YYYY-MM-DD")),M(e),E(S)}),[]),l.useEffect((()=>{const e=I;i||(e.startDate=r()().subtract(7,"days").format("YYYY-MM-DD"),e.endDate=r()().format("YYYY-MM-DD")),e.type=y.type,M(e),E(S)}),[y.type]),l.useEffect((()=>{F&&(E(1),A(!1))}),[F]);const E=e=>{n.A.getUsercompletedbets(e,I).then((t=>{t&&t.data&&t.data.data&&k(t.data.data),w(e)})).catch((e=>{const t=e.response.data.message;c.oR.error(t)}))},U=e=>{M((0,a.A)((0,a.A)({},I),{},{[e.target.name]:e.target.value}))};return console.log(_,"spoers list"),(0,g.jsxs)(g.Fragment,{children:[!s&&d.A.subheaderdesktopadmin("deleted"==y.type?"Deleted Bet History":"Unsettled Bet History"),(0,g.jsx)("div",{className:"container-fluid",children:(0,g.jsx)("div",{className:"row",children:(0,g.jsx)("div",{className:o.Fr?"col-md-12 padding-custom":"col-md-12 mt-1",children:(0,g.jsxs)("div",{className:"",children:[(0,g.jsx)("div",{className:"card-body p15 bg-gray mb-20",children:(0,g.jsx)("form",{className:"ng-pristine ng-valid ng-touched mb-0",method:"post",onSubmit:e=>{e.preventDefault(),A(!0)},children:(0,g.jsxs)("div",{className:"row row5",children:[(0,g.jsxs)("div",{className:"col-6 col-lg-2 mbc-5",children:[(0,g.jsx)("label",{className:"label",children:"User"}),(0,g.jsx)(m.A,{onSuggestionsFetchRequested:e=>{let{value:t}=e;return n.A.getUserListSuggestion({username:t})},onSelectUser:e=>{M((0,a.A)((0,a.A)({},I),{},{userId:e._id}))},ref:C})]}),(0,g.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,g.jsxs)("div",{className:"form-group mb-0",children:[(0,g.jsx)("label",{className:"label",children:"Search By Name"}),(0,g.jsx)("input",{type:"text",className:"mx-input",name:"name",onChange:U,placeholder:"Search By Name"})]})}),(0,g.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,g.jsxs)("div",{className:"form-group mb-0",children:[(0,g.jsx)("label",{className:"label",children:"Sport"}),(0,g.jsxs)("select",{name:"reportType",onChange:U,className:"custom-select ng-untouched ng-pristine ng-valid",children:[(0,g.jsx)("option",{value:"",children:"Select Sport"}),_.sports.filter((e=>4===e.sportId)).map((e=>(0,g.jsxs)("option",{value:e.sportId,children:[e.name," "]},e.sportId)))]})]})}),(0,g.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,g.jsxs)("div",{className:"form-group mb-0",children:[(0,g.jsx)("label",{className:"label",children:"Start Date"}),(0,g.jsx)("div",{className:"mx-datepicker",children:(0,g.jsx)("div",{className:"mx-input-wrapper",children:(0,g.jsx)("input",{name:"startDate",type:"datetime-local",autoComplete:"off",onChange:U,defaultValue:I.startDate,placeholder:"Select Date",className:"mx-input ng-pristine ng-valid ng-touched"})})})]})}),(0,g.jsx)("div",{className:"col-6 col-lg-2 mbc-5",children:(0,g.jsxs)("div",{className:"form-group mb-0",children:[(0,g.jsx)("label",{className:"label",children:"End Date"}),(0,g.jsx)("div",{className:"mx-datepicker",children:(0,g.jsx)("div",{className:"mx-input-wrapper",children:(0,g.jsx)("input",{name:"endDate",type:"datetime-local",autoComplete:"off",defaultValue:I.endDate,onChange:U,placeholder:"Select Date",className:"mx-input ng-untouched ng-pristine ng-valid"})})})]})}),(0,g.jsxs)("div",{className:"col-12 col-lg-1 mbc-5",children:[(0,g.jsx)("label",{className:"label",children:"\xa0"}),(0,g.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit"})]}),(0,g.jsxs)("div",{className:"col-12 col-lg-1 mbc-5",children:[(0,g.jsx)("label",{className:"label",children:"\xa0"}),(0,g.jsx)("button",{type:"button",onClick:()=>{C.current.resetValue(),M({status:"pending"}),A(!0)},className:"btn btn-primary btn-block",children:"Reset"})]}),(null===R||void 0===R||null===(t=R.user)||void 0===t?void 0:t.role)===b.T.admin&&(0,g.jsxs)("div",{className:"col-12 col-lg-1 mbc-5",children:[(0,g.jsx)("label",{className:"label",children:"\xa0"}),(0,g.jsx)("button",{type:"button",onClick:()=>{const e=N.docs.reduce(((e,t)=>(t.selected&&(e=!0),e)),!1);if(B||e){const e=N.docs.filter((e=>e.selected)).map((e=>e._id));e.length>0&&v.A.deleteBets({ids:e}).then((e=>{e.data.data.success&&(k((0,a.A)((0,a.A)({},N),{},{docs:N.docs.filter((e=>!e.selected))})),D(!1),c.oR.success(e.data.message))}))}else c.oR.error("Please select one item")},className:"btn btn-primary btn-block",children:"Delete"})]})]})})}),(0,g.jsx)("div",{className:"card-body",children:(0,g.jsx)(x.A,{bethistory:N,handlePageClick:e=>{E(e.selected+1)},onTrash:(e,t)=>{if(e.preventDefault(),!t._id)return void c.oR.error("Invalid bet data. Unable to delete.");window.confirm("Are you sure you want to delete?")&&v.A.deleteCurrentBet(t._id).then((e=>{const{success:s,message:l}=e.data.data;s?(T.emit("betDelete",{betId:t._id,userId:t.userId}),c.oR.success(l),k((e=>(0,a.A)((0,a.A)({},e),{},{docs:e.docs.filter((e=>{let{_id:s}=e;return s!==t._id}))})))):c.oR.error("Failed to delete bet.")})).catch((e=>{console.error("Error deleting bet:",e),c.oR.error("An error occurred while deleting the bet.")}))},page:S,isTrash:!0,handleSelectAll:()=>{D(!B);const e=N.docs.map((e=>(0,a.A)((0,a.A)({},e),{},{selected:!B})));k((0,a.A)((0,a.A)({},N),{},{docs:e}))},selectAll:B,handleSelectItem:e=>{const t=N.docs.map((t=>t===e?(0,a.A)((0,a.A)({},t),{},{selected:!t.selected}):t));k((0,a.A)((0,a.A)({},N),{},{docs:t}))}})})]})})})})]})}},2634:()=>{},6507:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ie});var a=s(4919),l=s(9950),c=s(2964),n=s(8429),i=s(3074),r=s(455),d=s(3170),o=s(4329),m=s(1215),h=s.n(m),u=s(1377),v=s(5868),x=s(4414);const p=e=>{let{matchId:t,isT10:s}=e;const[a,c]=l.useState(""),{socket:n}=(0,v.xp)(),i=()=>{const e=h().stringify({event_id:t}),a={method:s?"get":"post",maxBodyLength:1/0,url:s?"http://172.105.61.186:3000/t10score?marketId=".concat(t):"https://odds.99exch.com/ws/getScoreData","Content-Type":"application/x-www-form-urlencoded",data:e};o.A.request(a).then((e=>{var t;e.data&&c(s?null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data:e.data)}))};l.useEffect((()=>{let e=null;return s?n.on("score-t10",(e=>{(null===e||void 0===e?void 0:e.EventID)==t&&c(e)})):e=setInterval(i,500),()=>{clearInterval(e)}}),[]);const r=e=>{let t="";switch(e){case"6":t="six";break;case"4":t="four";break;case"ww":t="wicket"}return t};return(0,x.jsxs)(x.Fragment,{children:[!s&&(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:a}}),s&&a&&!u.Fr&&(0,x.jsx)("div",{className:"scorecard m-b-5",children:(0,x.jsxs)("div",{className:"row row5",children:[(0,x.jsxs)("div",{className:"col-md-5",children:[(0,x.jsxs)("p",{className:"team-1 row m-t-10",children:[(0,x.jsx)("span",{className:"team-name col-md-3",children:null===a||void 0===a?void 0:a.spnnation1}),(0,x.jsx)("span",{className:"score col-md-9 text-right",children:null===a||void 0===a?void 0:a.score1})]},(null===a||void 0===a?void 0:a.spnnation1)||0),(0,x.jsxs)("p",{className:"team-1 row m-t-10",children:[(0,x.jsx)("span",{className:"team-name col-md-3",children:null===a||void 0===a?void 0:a.spnnation2}),(0,x.jsx)("span",{className:"score col-md-9 text-right",children:null===a||void 0===a?void 0:a.score2})]},(null===a||void 0===a?void 0:a.spnnation2)||1)]}),(0,x.jsx)("div",{className:"col-md-7",children:(0,x.jsxs)("div",{className:"row row5",children:[(0,x.jsx)("div",{className:"col-md-5",children:(0,x.jsx)("div",{className:"row row5",children:(0,x.jsxs)("span",{className:"team-name",children:[a&&"1"==a.activenation1?(0,x.jsxs)("p",{className:"team-1  m-t-10",children:[(0,x.jsxs)("span",{children:["CRR"," ",a&&"1"==a.activenation1?a.spnrunrate1:a.spnrunrate2]})," ","RR"," ",a&&"1"==a.activenation1?a.spnreqrate1:a.spnreqrate2]}):(0,x.jsx)("p",{className:"team-1 m-t-10",children:(0,x.jsx)("span",{children:"\xa0"})}),a&&"1"==a.activenation2?(0,x.jsxs)("p",{className:"team-1 m-t-10",children:[(0,x.jsxs)("span",{children:["CRR"," ",a&&"1"==a.activenation1?a.spnrunrate1:a.spnrunrate2]})," ","RR"," ",a&&"1"==a.activenation1?a.spnreqrate1:a.spnreqrate2]}):(0,x.jsx)("p",{className:"team-1 m-t-10",children:(0,x.jsx)("span",{children:"\xa0"})}),"\xa0"]})})}),(0,x.jsxs)("div",{className:"col-md-7",children:[(0,x.jsx)("div",{className:"text-right",children:(0,x.jsx)("p",{className:"m-b-0",children:null===a||void 0===a?void 0:a.spnmessage})}),(0,x.jsx)("div",{className:"row",children:(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsx)("p",{className:"text-right ball-by-ball m-t-10",children:a&&a.balls&&a.balls.map(((e,t)=>""!=e&&(0,x.jsx)("span",{className:"ball-runs m-l-5 ".concat(r(e)),children:e},t)))})})})]})]})})]})}),s&&a&&u.Fr&&(0,x.jsxs)("div",{className:"scorecard m-b-5",children:[(0,x.jsxs)("div",{className:"row row5",children:[(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("p",{className:"team-1 row m-t-10",children:[(0,x.jsx)("span",{className:"team-name col-md-3 col-6",children:null===a||void 0===a?void 0:a.spnnation1}),(0,x.jsx)("span",{className:"score col-md-9 text-right col-6",children:null===a||void 0===a?void 0:a.score1})]},null===a||void 0===a?void 0:a.spnnation1)}),(0,x.jsx)("div",{className:"col-6",children:(0,x.jsxs)("p",{className:"team-1 row m-t-10",children:[(0,x.jsx)("span",{className:"team-name col-md-3 col-6",children:null===a||void 0===a?void 0:a.spnnation2}),(0,x.jsx)("span",{className:"score col-md-9 text-right col-6",children:null===a||void 0===a?void 0:a.score2})]},null===a||void 0===a?void 0:a.spnnation2)})]}),(0,x.jsxs)("div",{className:"row row5 mt-10",children:[(0,x.jsx)("div",{className:"col-md-5 col-3",children:(0,x.jsxs)("span",{className:"team-name",children:[a&&"1"==a.activenation1?(0,x.jsxs)("p",{className:"team-1  m-t-10",children:[(0,x.jsxs)("span",{children:["CRR"," ",a&&"1"==a.activenation1?a.spnrunrate1:a.spnrunrate2]})," ","RR"," ",a&&"1"==a.activenation1?a.spnreqrate1:a.spnreqrate2]}):(0,x.jsx)("p",{className:"team-1 m-t-10",children:(0,x.jsx)("span",{children:"\xa0"})}),a&&"1"==a.activenation2?(0,x.jsxs)("p",{className:"team-1 m-t-10",children:[(0,x.jsxs)("span",{children:["CRR"," ",a&&"1"==a.activenation1?a.spnrunrate1:a.spnrunrate2]})," ","RR"," ",a&&"1"==a.activenation1?a.spnreqrate1:a.spnreqrate2]}):(0,x.jsx)("p",{className:"team-1 m-t-10",children:(0,x.jsx)("span",{children:"\xa0"})}),"\xa0"]})}),(0,x.jsx)("div",{className:"col-md-7 col-9",children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-12",children:(0,x.jsx)("div",{className:"text-right",children:(0,x.jsx)("p",{className:"m-b-0",children:null===a||void 0===a?void 0:a.spnmessage})})}),(0,x.jsx)("div",{className:"col-md-12",children:(0,x.jsx)("p",{className:"text-right ball-by-ball m-t-10",children:a&&a.balls&&a.balls.map(((e,t)=>""!=e&&(0,x.jsx)("span",{className:"ball-runs m-l-5 ".concat(r(e)),children:e},e+t)))})})]})})]})]})]})};var j=s(4137),b=s(8674),f=s(387),g=s(8101),N=s(1114),k=s(3629),y=s(4635);const I=l.memo((e=>{let{selections:t,market:s,runner:a}=e;const l=(0,b.j)(),c=(0,b.G)(d.j),n=(0,b.G)(f.Qg),i=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;const i=k.A.getIpAddress();s.oddsType==g.P.BM&&0==t.size||t.price>0&&t.size&&n.user.role===y.T.user&&l((0,r._1)({isOpen:!0,betData:{isBack:e,odds:(s.marketName,parseFloat(t.price.toFixed(4))),volume:t.size,marketId:s.marketId,marketName:s.marketName,matchId:s.matchId,selectionName:a.runnerName,selectionId:a.selectionId,pnl:0,stack:0,currentMarketOdds:t.price,eventId:s.sportId,exposure:-0,ipAddress:i,type:N.R.Match,matchName:c.name,betOn:N.i.MATCH_ODDS,oddsType:s.oddsType}}))};return(0,x.jsxs)(x.Fragment,{children:[(()=>{var e;return null===t||void 0===t||null===(e=t.availableToBack)||void 0===e?void 0:e.map(((e,t)=>{const a=2===t?"back":"back".concat(2-t),l=e.changed?"blink":"";if(s.oddsType==g.P.BM&&2!==t)return;const c=s.oddsType!=g.P.BM?"box-1":"box-2";return(0,x.jsx)("div",{onClick:()=>i(!0,e),className:"".concat(c,"  text-center ").concat(a," ").concat(l),children:(0,x.jsx)("span",{className:"odd d-block",children:(s.oddsType,g.P.BM,(100*e.price-100).toFixed(2)?(100*e.price-100).toFixed(2):"-")})},t)}))})(),(()=>{var e;return null===t||void 0===t||null===(e=t.availableToLay)||void 0===e?void 0:e.map(((e,t)=>{const a=0===t?"lay":"lay".concat(t),l=e.changed?"blink":"";if(s.oddsType==g.P.BM&&0!=t)return;const c=s.oddsType!=g.P.BM?"box-1":"box-2";return(0,x.jsx)("div",{onClick:()=>i(!1,e),className:"".concat(c,"   text-center ").concat(a," ").concat(l),children:(0,x.jsx)("span",{className:"odd d-block",children:(s.oddsType,g.P.BM,(100*e.price-100).toFixed(2)?(100*e.price-100).toFixed(2):"-")})},t)}))})()]})})),M=e=>{let{selectionId:t,marketId:s}=e;const a=(0,b.G)(r.iZ),c=(0,l.useMemo)((()=>{const e=a.betData;let s=0,l=0,c="";return Object.keys(e).length>0&&(t==e.selectionId?e.isBack?(s=e.betOn==N.i.MATCH_ODDS||e.betOn==N.i.CASINO?e.odds*e.stack-e.stack:-e.stack,c=s>0?"green":"red"):(s=e.betOn==N.i.MATCH_ODDS||"fancy1"===e.gtype||e.betOn==N.i.CASINO?-1*(e.odds*e.stack-e.stack):-e.volume*e.stack/100,c="red"):e.isBack?(l=-1*e.stack,c="red"):(l=e.stack,c="green")),{current:s.toFixed(),oppsite:l.toFixed(),colorVal:c}}),[a]);return s!==a.betData.marketId?null:(0,x.jsx)("span",{className:"float-right",style:{color:"0"===c.current&&t===a.betData.selectionId||"0"===c.oppsite&&t!==a.betData.selectionId?"black":c.colorVal},children:a.betData.selectionId===t?c.current:c.oppsite})},_=l.memo(M);var S=s(4806),w=s.n(S),F=s(4933);const A=new class{getFancyBook(e){return F.Ay.post("get-fancy-position",e)}getUserwiseBook(e){return F.Ay.post("get-user-wise-book",e)}},B=()=>{const e=(0,b.G)(r.$f),t=(0,b.j)(),[s,a]=l.useState({}),[c,n]=l.useState(!1);l.useEffect((()=>{e.matchId&&A.getFancyBook(e).then((e=>{a(e.data.data),n(!0)}))}),[e]);const i=()=>{t((0,r.$i)({})),n(!1)};return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(w(),{isOpen:c,onRequestClose:e=>{i()},contentLabel:"Fancy Book",className:"modal-dialog modal-sm",ariaHideApp:!1,children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h5",{children:"Run Position"}),(0,x.jsx)("span",{onClick:i,className:"float-right",children:"X"})]}),(0,x.jsx)("table",{className:"table",children:Object.keys(s).length>0&&Object.keys(s).map((e=>(0,x.jsxs)("tr",{className:s[e]<0?"lay":"back",children:[(0,x.jsx)("td",{children:e}),(0,x.jsx)("td",{className:s[e]<0?"red":"green",children:s[e]})]},e)))})]})})})};var D=s(6487);const R=()=>{const e=(0,b.G)(r.xx),t=(0,b.j)(),[s,a]=l.useState([]),[c,n]=l.useState([]),[i,d]=l.useState(!1);l.useEffect((()=>{e.matchId&&A.getUserwiseBook(e).then((e=>{a(e.data.data.completeBookList),n(e.data.data.markets),d(!0)}))}),[e]);const o=()=>{t((0,r.Zs)({})),d(!1)};return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(w(),{isOpen:i,onRequestClose:e=>{o()},contentLabel:"Fancy Book",className:"modal-dialog modal-lg",ariaHideApp:!1,children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsxs)("h5",{children:[e.marketName," Book"]}),(0,x.jsx)("span",{onClick:o,className:"float-right",children:(0,x.jsx)("i",{className:"fa fa-times-circle"})})]}),(0,x.jsxs)("table",{className:"table",children:[(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Username"}),c.map(((e,t)=>(0,x.jsx)("th",{children:e.runnerName},t)))]}),s.length>0?s.map(((t,s)=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:t.username}),c.map(((a,l)=>{var c;return(0,x.jsx)("td",{children:null===(c=t["".concat(e.selectionId,"_").concat(a.selectionId)])||void 0===c?void 0:c.toFixed(2)},s+l)}))]},s))):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:5,className:"text-center",children:"No Result Found"})})]})]})})})};class T extends l.PureComponent{constructor(e){super(e),this.context=void 0,this.socketEvents=()=>{this.leaveMarketRoom(),this.joinMarketRoom(),this.getSocketEvents(),this.context.socket.on("connect",(()=>{this.joinMarketRoom()})),this.context.socket.on("reconnect",(()=>{this.joinMarketRoom()}))},this.joinMarketRoom=()=>{this.props.currentMatch&&this.context.socket.emit("joinRoom",this.props.currentMatch.matchId),this.props.data.forEach((async e=>{this.context.socket.emit("joinMarketRoom",e.marketId)}))},this.leaveMarketRoom=()=>{this.props.data.forEach((async e=>{this.context.socket.emit("leaveRoom",e.marketId),this.context.socket.emit("leaveRoom",e.matchId)}))},this.getSocketEvents=()=>{this.context.socket.on("getMarketData",(e=>{this.setState((t=>({runnersData:(0,a.A)((0,a.A)({},t.runnersData),{},{[e.marketId]:e})})))}))},this.offplaylimit=e=>{var t,s,a,l,c;const n=e.oddsType==g.P.BM?null===(t=this.props.currentMatch)||void 0===t?void 0:t.inPlayBookMaxLimit:null===(s=this.props.currentMatch)||void 0===s?void 0:s.inPlayMaxLimit,i=e.oddsType==g.P.BM?null===(a=this.props.currentMatch)||void 0===a?void 0:a.offPlayBookMaxLimit:null===(l=this.props.currentMatch)||void 0===l?void 0:l.offPlayMaxLimit;return null!==(c=this.props.currentMatch)&&void 0!==c&&c.inPlay?n:i};const t={},s={},l={};let c={};e.data.forEach((async e=>{e.runners.forEach((l=>{c=(0,a.A)((0,a.A)({},c),{},{[e.marketId]:(0,a.A)((0,a.A)({},c[e.marketId]),{},{[l.selectionId]:l.runnerName})}),t[e.marketId]=e,s[l.selectionId]=0})),l[e.marketId]=""})),this.state={runnersData:t,runnersDataPrev:JSON.parse(JSON.stringify(t)),profitLoss:s,getMarketBook:e.getMarketBook,remarkMarket:l,runnersName:c}}componentDidMount(){this.socketEvents()}componentWillUnmount(){this.context.socket.off("getMarketData"),this.leaveMarketRoom()}componentDidUpdate(e){e.data!==this.props.data&&this.socketEvents()}render(){const{data:e,getMarketBook:t}=this.props,{runnersData:s}=this.state;return console.log(s,"kjkjjkjkjkjkjk"),console.log(t,"that vlauesss"),console.log(this.props.shared,"paresnt sharedddddd"),(0,x.jsxs)("div",{className:"",children:[e&&e.map((e=>{var l,c,n,i,r,d,o,m;const h={},u=s?s[e.marketId]:null;let v=!1;var p,j;u&&(v=!(null===u||void 0===u||null===(p=u.runners)||void 0===p||null===(j=p[0])||void 0===j||!j.ex));const b=e.oddsType!=g.P.B?"box-6":"box-4",f=e.oddsType!=g.P.B?"box-2":"box-1";return v?(0,x.jsxs)("div",{style:{border:"1px",borderColor:"gray",borderStyle:"solid"},className:"",children:[(0,x.jsxs)("div",{className:"market-title",children:[e.marketName,(0,x.jsx)("a",{href:"#Bookmaker-market",onClick:t=>{t.preventDefault(),this.props.setRules({open:!0,type:e.oddsType===g.P.BM?"Bookmaker":e.oddsType})},className:"m-r-5 game-rules-icon",children:(0,x.jsx)("span",{children:(0,x.jsx)("i",{className:"fa fa-info-circle float-right"})})}),(0,x.jsxs)("span",{className:"float-right m-r-10",children:["Maximum Bet ",(0,x.jsx)("span",{children:null!==this&&void 0!==this&&null!==(l=this.props)&&void 0!==l&&null!==(c=l.userState)&&void 0!==c&&null!==(n=c.user)&&void 0!==n&&n.userSetting?null===this||void 0===this||null===(i=this.props)||void 0===i||null===(r=i.userState)||void 0===r||null===(d=r.user)||void 0===d||null===(o=d.userSetting[1])||void 0===o?void 0:o.maxBet:"".concat(this.offplaylimit(e))})]})]}),(0,x.jsxs)("div",{className:"table-header",children:[(0,x.jsxs)("div",{style:{fontSize:"18px",backgroundColor:"#76d68f"},className:"float-left country-name ".concat(b," min-max"),children:[(0,x.jsx)("b",{}),"Team"]}),(0,x.jsx)("div",{style:{backgroundColor:"#76d68f",borderColor:"#76d68f"},className:"back ".concat(f," float-left text-center"),children:(0,x.jsx)("b",{children:"Back"})}),(0,x.jsx)("div",{style:{backgroundColor:"#76d68f",borderColor:"#76d68f"},className:"lay ".concat(f," float-left text-center"),children:(0,x.jsx)("b",{children:"Lay"})})]}),u&&(null===u||void 0===u||null===(m=u.runners)||void 0===m?void 0:m.sort(((e,t)=>(null===e||void 0===e?void 0:e.sortPriority)-(null===t||void 0===t?void 0:t.sortPriority))).map((s=>{var l,c,n,i;return s=(0,a.A)((0,a.A)({},s),{},{runnerName:null===(l=this.state.runnersName)||void 0===l||null===(c=l[e.marketId])||void 0===c?void 0:c[s.selectionId]}),(0,x.jsx)("div",{children:(0,x.jsxs)("div",{"data-title":s.status,className:"table-row ".concat("SUSPENDED"===s.status?"suspended":""),children:[(0,x.jsxs)("div",{style:{backgroundColor:"#e2dddd"},className:"  country-name ".concat(b),children:[(0,x.jsx)("span",{className:"team-name ",children:(0,x.jsx)("b",{style:{color:"black"},children:s.runnerName})}),(0,x.jsxs)("p",{children:[t&&t["".concat(e.marketId,"_").concat(s.selectionId)]?(0,x.jsx)("span",{className:t["".concat(e.marketId,"_").concat(s.selectionId)]>0?(null===this||void 0===this||null===(n=this.props)||void 0===n?void 0:n.userState.user.role)!==y.T.user?"red":"green":(null===this||void 0===this||null===(i=this.props)||void 0===i?void 0:i.userState.user.role)!==y.T.user?"green":"red",children:this.props.shared?(t["".concat(e.marketId,"_").concat(s.selectionId)]*(this.props.shared/100)).toLocaleString():t["".concat(e.marketId,"_").concat(s.selectionId)].toLocaleString()}):(0,x.jsx)("span",{className:"",style:{color:"black"},children:"(0)"}),(0,x.jsx)(_,{marketId:e.marketId,selectionId:s.selectionId})]})]}),(0,x.jsx)(I,{selections:s.ex,selectionsPrev:h,market:e,runner:s})]})},s.selectionId)}))),this.state.remarkMarket[e.marketId]?(0,x.jsx)("div",{className:"table-remark text-right remark",children:this.state.remarkMarket[e.marketId]}):""]},e._id):null})),this.props.fancySelectionId&&(0,x.jsx)(B,{}),this.props.marketUserBookId&&(0,x.jsx)(R,{})]})}}T.contextType=v.dV;const C={betPopup:r._1,setRules:D.Qg},E=(0,i.Ng)((e=>({bet:e.betReducer.bet,getMarketBook:e.betReducer.userBookMarketList&&e.betReducer.userBookMarketList,fancySelectionId:e.betReducer.fancyMatchAndSelectionId,currentMatch:e.sportReducer.currentMatch,marketUserBookId:e.betReducer.marketBookAndSelectionId})),C)(T);var U=s(4598);const L=l.memo((e=>{let{fancies:t,fancyUpdate:s}=e;const l=(0,b.G)(f.Qg);console.log(l,"isuyererer in fancylist");const c=(0,b.G)(D.Mm),n=(0,b.j)(),i=(0,b.G)(d.j),o=(0,b.G)(r.ct),m=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(l.user.role!==y.T.user)return!1;if(0===t.BackPrice1&&e)return!1;if(0===t.LayPrice1&&!e)return!1;const s=k.A.getIpAddress();n((0,r._1)({isOpen:!0,betData:{isBack:e,odds:e?t.BackPrice1:t.LayPrice1,volume:e?t.BackSize1:t.LaySize1,marketId:t.marketId,marketName:"Fancy",matchId:t.matchId,selectionName:t.RunnerName,selectionId:t.SelectionId,pnl:0,stack:0,currentMarketOdds:e?t.BackPrice1:t.LayPrice1,eventId:t.sportId,exposure:-0,ipAddress:s,type:N.R.Match,matchName:i.name,betOn:N.i.FANCY,gtype:t.gtype,oppsiteVol:e?t.LaySize1:t.BackSize1,oddsType:g.P.F}}))};return(0,x.jsxs)("div",{className:"table-body",children:[(null===t||void 0===t?void 0:t.length)>0&&t.map((e=>{var t,c,i,d,h,v,p,j,b,f,g,N,k,y,I,M;if(null===e||void 0===e||!e.active)return null;let S={};return s[e.marketId]&&(S=s[e.marketId]),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"fancy-tripple fancy-tripple-box",children:(0,x.jsxs)("div",{"data-title":S.GameStatus||e.GameStatus,className:"table-row ".concat(e.isSuspend||S.GameStatus?"suspended":""),children:[(0,x.jsxs)("div",{className:"float-left country-name box-6",style:{borderBottom:"0px none"},children:[(0,x.jsxs)("p",{className:"m-b-0",children:[(0,x.jsxs)("span",{style:{display:u.Fr?"flex":"",justifyContent:u.Fr?"space-between":"",flexDirection:"column",alignItems:"center",color:"white"},children:[e.fancyName,u.Fr&&(0,x.jsx)(U.A,{nameString:e.marketId,min:null!==(t=null===l||void 0===l||null===(c=l.user)||void 0===c||null===(i=c.userSetting)||void 0===i||null===(d=i[2])||void 0===d?void 0:d.minBet)&&void 0!==t?t:"N/A",max:null!==(h=null===l||void 0===l||null===(v=l.user)||void 0===v||null===(p=v.userSetting)||void 0===p||null===(j=p[2])||void 0===j?void 0:j.maxBet)&&void 0!==h?h:"N/A"})]}),o&&(0,x.jsx)("span",{style:{textDecoration:"underline",cursor:"pointer"},onClick:t=>{t.preventDefault(),n((0,r.$i)({matchId:e.matchId,selectionId:S.SelectionId,marketName:e.fancyName}))},className:o[e.marketId]>=0?"green":"red",children:o[e.marketId]})]}),(0,x.jsxs)("p",{className:"p5",children:[" ",(0,x.jsx)(_,{marketId:e.marketId,selectionId:S.SelectionId})]})]}),(0,x.jsxs)("div",{className:"".concat(u.Fr?"box-2":"box-1"," lay float-left text-center"),onClick:()=>m(!1,(0,a.A)((0,a.A)({},e),S)),children:[(0,x.jsx)("span",{className:"odd d-block",children:S.LayPrice1?S.LayPrice1:"0"})," ",(0,x.jsx)("span",{children:S.LaySize1})]}),(0,x.jsxs)("div",{className:"".concat(u.Fr?"box-2":"box-1"," back float-left text-center"),onClick:()=>m(!0,(0,a.A)((0,a.A)({},e),S)),children:[(0,x.jsx)("span",{className:"odd d-block",children:S.BackPrice1?S.BackPrice1:"0"})," ",(0,x.jsx)("span",{children:S.BackSize1})]}),!u.Fr&&(0,x.jsxs)("div",{className:"box-2 float-left text-right min-max",style:{borderBottom:"0px none",color:"white"},children:[(0,x.jsxs)("span",{className:"d-block",children:["Min: ",(0,x.jsx)("span",{children:null!==(b=null===l||void 0===l||null===(f=l.user)||void 0===f||null===(g=f.userSetting)||void 0===g||null===(N=g[2])||void 0===N?void 0:N.minBet)&&void 0!==b?b:"N/A"})]}),(0,x.jsxs)("span",{className:"d-block ",children:["Max: ",(0,x.jsx)("span",{children:null!==(k=null===l||void 0===l||null===(y=l.user)||void 0===y||null===(I=y.userSetting)||void 0===I||null===(M=I[2])||void 0===M?void 0:M.maxBet)&&void 0!==k?k:"N/A"})]})]})]})}),S.rem&&(0,x.jsx)("div",{className:"table-remark text-right",children:(0,x.jsx)("p",{className:"m-b-0",children:S.rem})})]},e._id)}))," ",!c&&(null===t||void 0===t?void 0:t.length)<=0&&(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"fancy-tripple bg-gray text-center p10",children:"No Real time Fancy Found"})},0),c&&(0,x.jsx)("div",{className:"text-center m-1",children:(0,x.jsx)("i",{className:"mx-5 fas fa-spinner fa-spin"})},0)]})}));var P=s(6631);class O extends l.Component{constructor(e){super(e),this.context=void 0,this.interval=void 0,this.socketEvents=()=>{this.context.socket.emit("joinRoom",this.props.matchId),this.props.socketUser&&this.props.socketUser.emit("joinRoomMatchIdWUserId",this.props.matchId),this.getFancySockets(),this.addNewFancy(),this.removeFancy(),this.suspendedFancy(),this.context.socket.on("connect",(()=>{this.context.socket.emit("joinRoom",this.props.matchId)}))},this.leaveSocketEvents=()=>{this.context.socket.off("addNewFancy"),this.context.socket.off("removeFancy"),this.context.socket.off("getFancyData"),this.context.socket.off("suspendedFancy"),this.context.socket.emit("leaveRoom",this.props.matchId)},this.checkFancyKey=(e,t)=>e.findIndex((e=>e.marketId==t.SelectionId)),this.addNewFancy=()=>{this.props.socketUser&&this.props.socketUser.on("addNewFancy",(e=>{var t,s;let{newFancy:l,fancy:c}=e;const n=this.FancyBallTypes(c.RunnerName),i=[...(null===this||void 0===this||null===(t=this.state)||void 0===t||null===(s=t.fancies)||void 0===s?void 0:s[n])||[]];if(-1==this.checkFancyKey(i,c)&&this.props.fancyType==l.gtype){const e=(0,a.A)({},this.state.fancyUpdate);i.push(l),this.setState({fancies:(0,a.A)((0,a.A)({},this.state.fancies),{},{[n]:i.sort(((e,t)=>e.sr_no-t.sr_no))}),fancyUpdate:(0,a.A)((0,a.A)({},e),{},{[c.SelectionId]:c})})}}))},this.removeFancy=()=>{this.props.socketUser&&this.props.socketUser.on("removeFancy",(e=>{const t=(0,a.A)({},this.state.fancies);Object.keys(t).forEach((s=>{t[s]=t[s].filter((t=>t.marketId!==e.marketId))}));const s=(0,a.A)({},this.state.fancyUpdate);delete s[e.marketId],this.setState({fancies:t,fancyUpdate:s})}))},this.suspendedFancy=()=>{console.log("hellow world hahahahha"),this.props.socketUser.on("suspendedFancy",(e=>{const t=e.fancy,s=e.type;console.log("this is suspendedFancy socket ",t,s);const l=[...this.state.fancies[this.FancyBallTypes(t.fancyName)]],c=l.findIndex((e=>e.marketId==t.marketId&&e.matchId==t.matchId));-1!=c&&("active"!==s?(l[c].GameStatus=t.GameStatus,l[c].isSuspend=t.isSuspend):l[c].active=t.active,this.setState({fancies:(0,a.A)((0,a.A)({},this.state.fancies),{},{[s]:l}),fancyUpdate:this.state.fancyUpdate}))}))},this.onFancyType=e=>{P.M.dispatch((0,r.as)(e)),this.setState({fancies:{}})},this.fancyMenu=e=>[{type:"session",label:"Fancy",width:u.Fr?"19%":"11%"}].map((t=>(0,x.jsx)("li",{onClick:e=>this.onFancyType(t.type),style:{width:"".concat(t.width)},className:"nav-item",children:(0,x.jsx)("a",{href:"#",onClick:e=>e.preventDefault(),role:"tab",className:"nav-link ".concat(e===t.type?"active":""),children:(0,x.jsx)("span",{style:{textTransform:"uppercase"},children:t.label})})},t.type))),this.fancyheader=e=>(0,x.jsxs)("div",{className:"table-header text-dark",children:[(0,x.jsxs)("div",{style:{fontSize:"18px",backgroundColor:"#76d68f"},className:"float-left ".concat(u.Fr?"bg-theme text-dark":" text-dark"," country-name box-6"),children:[u.Fr?e:"",(0,x.jsx)("p",{style:{fontSize:"18px",backgroundColor:"#76d68f"},children:"Session"})]}),(0,x.jsx)("div",{style:{fontSize:"18px",backgroundColor:"#76d68f"},className:"".concat(u.Fr?"box-2":"box-1"," float-left lay text-center"),children:(0,x.jsx)("b",{children:"KHAI"})}),(0,x.jsx)("div",{style:{fontSize:"18px",backgroundColor:"#76d68f"},className:"".concat(u.Fr?"box-2":"box-1"," float-left back text-center"),children:(0,x.jsx)("b",{children:"LAGAI"})}),!u.Fr&&(0,x.jsx)("div",{className:"box-2 float-left"})]});const t=e.fancies,s={},l={};console.log(t,"session from the frrontend  Hello Worrld "),t.sort(((e,t)=>e.sr_no-t.sr_no)).forEach((e=>{s[e.marketId]={gtype:e.gtype,SelectionId:e.marketId,RunnerName:e.fancyName};const t=this.FancyBallTypes(e.fancyName);l[t]=l[t]?[...l[t],e]:[e]})),this.state={matchId:e.matchId,fancies:l,fancyUpdate:l}}componentDidMount(){this.socketEvents()}componentDidUpdate(e){if(e.matchId!==this.props.matchId&&(this.leaveSocketEvents(),this.socketEvents(),clearInterval(this.interval)),e.fancies!==this.props.fancies){const e={};this.props.fancies.forEach((t=>{const s=this.FancyBallTypes(t.fancyName);e[s]=e[s]?[...e[s],t]:[t]})),this.setState({fancies:e})}}getFancySockets(){this.interval=setInterval((()=>{c.A.fancyData(+this.props.matchId).then((e=>{let{data:t}=e;const s=t.data.reduce(((e,t)=>(e[t.SelectionId]=(0,a.A)((0,a.A)({},this.state.fancyUpdate[t.SelectionId]),t),e)),{});this.setState({fancyUpdate:s})}))}),500)}componentWillUnmount(){this.leaveSocketEvents(),clearInterval(this.interval)}FancyBallTypes(e){let t="blank";return e&&(e.includes(" ball run ")&&(t="ballRun"),(/^Only/.test(e)||e.includes(" ball No "))&&(t="overBallNo")),t}render(){var e,t;const{fancies:s,matchId:a,fancyUpdate:l}=this.state,c=(u.Fr,"col-12"),{fancyType:n}=this.props;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("ul",{role:"tablist",className:"nav nav-tabs fancy-group","aria-label":"Tabs"}),(0,x.jsxs)("div",{className:"fancy-market row  ",style:{marginLeft:u.Fr?"0px":"",marginRight:u.Fr?"0px":""},children:[(0,x.jsx)("div",{className:"".concat(c),style:{padding:u.Fr?"0px":""},children:(0,x.jsxs)("div",{children:[!u.Fr&&(0,x.jsxs)("div",{className:"market-title mt-1 d-none",children:["Session Market",(0,x.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),this.props.setRules({open:!0,type:"Fancy-Market-1"})},className:"m-r-5 game-rules-icon",children:(0,x.jsx)("span",{children:(0,x.jsx)("i",{className:"fa fa-info-circle float-right"})})})]}),s&&(0,x.jsxs)(x.Fragment,{children:[this.fancyheader(""),(0,x.jsx)(L,{fancies:s.blank,fancyUpdate:l})]})]})}),(0,x.jsxs)("div",{className:"".concat(c),style:{padding:u.Fr?"0px":""},children:[(null===s||void 0===s||null===(e=s.overBallNo)||void 0===e?void 0:e.length)>0&&(0,x.jsxs)("div",{children:[!u.Fr&&(0,x.jsx)("div",{className:"market-title mt-1",children:"Over by Over Session Market"}),this.fancyheader("Over by Over Session Market"),s&&(0,x.jsx)(L,{fancies:s.overBallNo,fancyUpdate:l})]}),(null===s||void 0===s||null===(t=s.ballRun)||void 0===t?void 0:t.length)>0&&(0,x.jsxs)("div",{children:[!u.Fr&&(0,x.jsx)("div",{className:"market-title mt-1",children:"Ball by Ball Session Market"}),this.fancyheader("Ball by Ball Session Market"),s&&(0,x.jsx)(L,{fancies:s.ballRun,fancyUpdate:l})]})]})]})]})}}O.contextType=v.dV;const Y={selectFancyType:r.Op,setRules:D.Qg},G=(0,i.Ng)((e=>({fancyType:e.betReducer.fancyType})),Y)(O);var z=s(5257),q=s(3119),H=s(9051),V=s.n(H),Q=s(8756),W=s(9402),$=s(2066),K=s(1043),J=s(4446);const Z=()=>{const[e,t]=l.useState([]),s=(0,b.G)(r.Rf),a=(0,b.G)(d.j),c=(0,b.G)(K.GQ),i=(0,b.G)(f.Qg),{socketUser:o}=(0,j.E$)(),[m,h]=((0,b.j)(),l.useState(!1)),u=(0,n.zy)();return l.useEffect((()=>{if(console.log(null===c||void 0===c?void 0:c.match_id," getCasinoCurrentMatch hello world here is Match id"),a&&a.matchId&&u.pathname.includes("/odds")||c&&c.match_id){var e,s;const l=a&&a.matchId&&u.pathname.includes("/odds")?a.matchId:c&&null!==c&&void 0!==c&&null!==(e=c.event_data)&&void 0!==e&&e.match_id?null===c||void 0===c||null===(s=c.event_data)||void 0===s?void 0:s.match_id:0;console.log("hello world match"),J.A.getBets22(l).then((e=>{console.log(e.data,"chech bet dataggfgf"),e&&e.data&&e.data.data&&t(e.data.data.bets)})).catch((e=>{console.log(e.stack)}))}}),[a,c,m]),l.useEffect((()=>{s.bet.marketId&&h(!m)}),[s.bet]),l.useEffect((()=>(o.on("placedBet",(e=>{h(!m)})),()=>{o.off("placedBet")})),[e]),l.useEffect((()=>(o.on("betDelete",(e=>{let{betId:t}=e;h(!m)})),()=>{o.off("betDelete")})),[e]),(0,x.jsx)("div",{className:"table-responsive-new",style:{height:"200px",overflowY:"scroll"},children:(0,x.jsxs)("table",{className:"table coupon-table scorall mybet",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{style:{background:"#76d68f"},children:[(0,x.jsx)("th",{children:" Sr. "}),i.user.role!==y.T.user&&(0,x.jsx)("th",{children:"Username"}),(0,x.jsx)("th",{className:"text-center",children:" Narration"}),(0,x.jsx)("th",{children:" Rate"}),(0,x.jsx)("th",{children:" Amount"}),(0,x.jsx)("th",{children:" Run"}),(0,x.jsx)("th",{children:" Mode"}),(0,x.jsx)("th",{className:"text-center",children:" Dec"}),i.user.role!==y.T.user&&(0,x.jsx)("th",{children:" Date"})]})}),(0,x.jsx)("tbody",{className:"scorall",children:e.map(((e,t)=>{var s,a,l,c;return(0,x.jsxs)("tr",{className:(null===(s=e.profitLoss)||void 0===s?void 0:s.$numberDecimal)<0?"bg-danger text-white":"bg-success",children:[(0,x.jsxs)("td",{className:"no-wrap",children:[" ",t+1," "]}),i.user.role!==y.T.user&&(0,x.jsx)("td",{children:e.userName}),(0,x.jsxs)("td",{className:"no-wrap",children:[" ",e.selectionName," /"," ","Fancy"===e.marketName&&"fancy1"!==e.gtype?e.volume.toFixed(2):e.odds," "]}),(0,x.jsxs)("td",{className:"no-wrap text-center",children:[" ","Fancy"===e.marketName&&"fancy1"!==e.gtype?e.volume.toFixed(2):e.odds]}),(0,x.jsx)("td",{className:"no-wrap",children:Math.abs(Number(null===e||void 0===e||null===(a=e.profitLoss)||void 0===a?void 0:a.$numberDecimal)).toFixed(2)}),(0,x.jsxs)("td",{className:"no-wrap text-center",children:["Fancy"===e.marketName&&"fancy1"!==e.gtype?e.odds:"-"," "]}),(0,x.jsxs)("td",{className:"no-wrap text-center",children:[" ",e.isBack?"Yes":"No"," "]}),(0,x.jsxs)("td",{className:"no-wrap text-center",children:[" ",null!==e&&void 0!==e&&null!==(l=e.result)&&void 0!==l&&l.result?null===e||void 0===e||null===(c=e.result)||void 0===c?void 0:c.result:"YES"," "]}),i.user.role!==y.T.user&&(0,x.jsx)("td",{className:"no-wrap",children:V().utc(e.betClickTime).utcOffset("+05:30").format("DD/MM/YYYY hh:mm:ss A")})]},e._id)}))})]})})},X=e=>{var t,s;const a=(0,b.G)(f.Qg),{socketUser:c}=(0,j.E$)(),[i,r]=l.useState(!1),d=((0,W.Y)(),(0,n.g)().share);return console.log(e,"props is here in match details hahhahahah"),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:a.user.role!==y.T.user?" admin-match-detail":"featured-box",children:(0,x.jsx)("div",{className:"rowk",children:(0,x.jsxs)("div",{className:"col-888  sports-wrapper m-b-10 pr0",children:[(0,x.jsxs)("div",{className:"game-heading mb-1",children:[(0,x.jsx)("span",{className:"card-header-title",children:null===(t=e.currentMatch)||void 0===t?void 0:t.name}),(0,x.jsx)("span",{className:"float-right card-header-date",children:V()(null===(s=e.currentMatch)||void 0===s?void 0:s.matchDateTime).format("MM/DD/YYYY  h:mm a")})]}),e.scoreBoard(),e.t10Tv(450),(0,x.jsx)("div",{id:"sidebar-right",className:"col- pl  ",children:(0,x.jsxs)("div",{className:"ps",children:[(0,x.jsxs)("div",{className:"sidebar-right-inner",children:[e.otherTv(),((t,s,a,l,c,n,i,r,d,o,m,h,u,v,p,j,b,f,g,N,k,y,I,M,_,S,w,F)=>{const A=(null===e||void 0===e||null===(t=e.matchedMatch)||void 0===t?void 0:t.batting_team)===(null===e||void 0===e||null===(s=e.matchedMatch)||void 0===s?void 0:s.team_a_id)?{short:null===e||void 0===e||null===(a=e.matchedMatch)||void 0===a?void 0:a.team_a_short,img:null===e||void 0===e||null===(l=e.matchedMatch)||void 0===l?void 0:l.team_a_img,score:null===e||void 0===e||null===(c=e.matchedMatch)||void 0===c?void 0:c.team_a_scores,over:null===e||void 0===e||null===(n=e.matchedMatch)||void 0===n?void 0:n.team_a_over,crr:null===e||void 0===e||null===(i=e.matchedMatch)||void 0===i?void 0:i.curr_rate}:{short:null===e||void 0===e||null===(r=e.matchedMatch)||void 0===r?void 0:r.team_b_short,img:null===e||void 0===e||null===(d=e.matchedMatch)||void 0===d?void 0:d.team_b_img,score:null===e||void 0===e||null===(o=e.matchedMatch)||void 0===o?void 0:o.team_b_scores,over:null===e||void 0===e||null===(m=e.matchedMatch)||void 0===m?void 0:m.team_b_over,crr:null===e||void 0===e||null===(h=e.matchedMatch)||void 0===h?void 0:h.curr_rate},B=(null===e||void 0===e||null===(u=e.matchedMatch)||void 0===u?void 0:u.batting_team)===(null===e||void 0===e||null===(v=e.matchedMatch)||void 0===v?void 0:v.team_a_id)?{short:null===e||void 0===e||null===(p=e.matchedMatch)||void 0===p?void 0:p.team_b_short,img:null===e||void 0===e||null===(j=e.matchedMatch)||void 0===j?void 0:j.team_b_img,score:null===e||void 0===e||null===(b=e.matchedMatch)||void 0===b?void 0:b.team_b_scores,over:null===e||void 0===e||null===(f=e.matchedMatch)||void 0===f?void 0:f.team_b_over,crr:null===e||void 0===e||null===(g=e.matchedMatch)||void 0===g?void 0:g.curr_rate}:{short:null===e||void 0===e||null===(N=e.matchedMatch)||void 0===N?void 0:N.team_a_short,img:null===e||void 0===e||null===(k=e.matchedMatch)||void 0===k?void 0:k.team_a_img,score:null===e||void 0===e||null===(y=e.matchedMatch)||void 0===y?void 0:y.team_a_scores,over:null===e||void 0===e||null===(I=e.matchedMatch)||void 0===I?void 0:I.team_a_over,crr:null===e||void 0===e||null===(M=e.matchedMatch)||void 0===M?void 0:M.curr_rate};return(0,x.jsxs)("div",{className:"border rounded shadow-sm  mb-3 bg-white ".concat((null!==e&&void 0!==e&&null!==(_=e.matchedMatch)&&void 0!==_&&_.match_id,"d-none")),children:[(0,x.jsxs)("div",{style:{backgroundColor:"#424242"},className:"d-flex py-2 px-1 justify-content-between align-items-center mb-",children:[(0,x.jsx)("h6",{className:"mb-0 fw-bold  text-white",children:"Match Scorecard"}),(0,x.jsx)("span",{className:"badge bg-success",children:"Live"})]}),(0,x.jsxs)("div",{className:"border-bottom",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 px-2 ",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,x.jsx)("img",{src:A.img,alt:A.short,className:"rounded-circle border",style:{width:"45px",height:"45px",objectFit:"cover",objectPosition:"center"}}),(0,x.jsx)("h6",{className:"mb-0 fw-semibold",children:null===A||void 0===A?void 0:A.short})]}),(0,x.jsx)("div",{className:"bg-dark text-white p-2 rounded shadow-sm",children:null===e||void 0===e||null===(S=e.matchedMatch)||void 0===S?void 0:S.first_circle}),(0,x.jsxs)("div",{className:"text-end",children:[(0,x.jsx)("h6",{className:"mb-0 fw-bold",children:A.score?"".concat(A.score,"/").concat(A.over):"--/--"}),(0,x.jsxs)("small",{className:"text-muted",children:[A.over," overs"]}),(0,x.jsx)("div",{children:(0,x.jsxs)("small",{className:"text-muted",children:["Crr: ",A.crr]})})]})]}),(0,x.jsx)("div",{className:"d-flex flex-wrap justify-content-center pb-1",children:null===e||void 0===e||null===(w=e.matchedMatch)||void 0===w||null===(F=w.last36ball)||void 0===F?void 0:F.map(((e,t)=>e?(0,x.jsx)("div",{className:"d-flex justify-content-center align-items-center  rounded-circle bg-light ".concat("W"===e?"text-danger":"text-dark"," border"),style:{width:"24px",height:"24px",fontSize:"0.75rem",fontWeight:"bold",marginRight:"2px"},children:e},t):null))})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 px-2",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,x.jsx)("img",{src:B.img,alt:B.short,className:"rounded-circle border",style:{width:"45px",height:"45px",objectFit:"cover",objectPosition:"center"}}),(0,x.jsx)("h6",{className:"mb-0 fw-semibold",children:B.short})]}),(0,x.jsxs)("div",{className:"text-end",children:[(0,x.jsx)("h6",{className:"mb-0 fw-bold",children:B.score?"".concat(B.score,"/").concat(B.over):"--/--"}),(0,x.jsxs)("small",{className:"text-muted",children:[B.over," overs"]})]})]})]})})(),e.marketDataList.stake&&(0,x.jsx)(q.A,{stake:e.marketDataList.stake})]}),(0,x.jsx)("div",{className:"ps__rail-x",style:{left:0,bottom:0},children:(0,x.jsx)("div",{className:"ps__thumb-x",tabIndex:0,style:{left:0,width:0}})}),(0,x.jsx)("div",{className:"ps__rail-y",style:{top:0,right:0},children:(0,x.jsx)("div",{className:"ps__thumb-y",tabIndex:0,style:{top:0,height:0}})})]})}),(0,x.jsx)("div",{className:"markets",children:(0,x.jsx)("div",{className:"main-market",children:e.markets&&(0,x.jsx)(E,{data:e.markets,userState:a,shared:d})})}),(0,x.jsx)("br",{}),e.fancies&&e.currentMatch&&"4"==e.currentMatch.sportId&&(0,x.jsx)(l.Fragment,{children:(0,x.jsx)(G,{socketUser:c,fancies:e.fancies,matchId:e.matchId})}),(0,x.jsxs)("div",{style:{background:"none",border:"none"},className:"card m-b-10 my-bet",children:[(0,x.jsx)("h1",{className:"section-title text-center",children:"OPEN BETS"}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsx)(z.A,{})})]}),(0,x.jsxs)("div",{className:"card m-b-10 my-bet d-none",children:[(0,x.jsx)("h6",{className:"p-2 w-100 m-0 bg-info text-white text-center",children:"Declared Bets"}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsx)(Z,{})})]})]})})}),(0,x.jsxs)(Q.A,{show:i,onHide:()=>r(!1),size:"lg",children:[(0,x.jsx)(Q.A.Header,{closeButton:!0,children:(0,x.jsx)(Q.A.Title,{children:"Bets"})}),(0,x.jsx)(Q.A.Body,{children:(0,x.jsx)($.default,{matchId:e.matchId,hideHeader:!0})})]})]})},ee=l.memo(X);var te=s(4135),se=s(409);const ae=e=>{var t,s;(0,b.j)(),(0,b.G)(r.tf);const[a,c]=l.useState(!1),{socketUser:i}=(0,j.E$)(),d=(0,b.G)(f.Qg),o=(0,n.g)().share;return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"prelative",children:[(0,x.jsx)(te.A,{children:(0,x.jsxs)(se.A,{eventKey:"home",title:"ODDS",children:[(0,x.jsxs)("div",{className:"game-heading clsforellipse mb-1",children:[(0,x.jsx)("span",{className:"card-header-title giveMeEllipsis",children:null===(t=e.currentMatch)||void 0===t?void 0:t.name}),(0,x.jsx)("span",{className:"float-right card-header-date",children:V()(null===(s=e.currentMatch)||void 0===s?void 0:s.matchDateTime).format("MM/DD/YYYY  h:mm a")})]}),e.scoreBoard(),a&&e.otherTv(),((t,s,a,l,c,n,i,r,d,o,m,h,u,v,p,j,b,f,g,N,k,y,I,M,_,S,w,F)=>{const A=(null===e||void 0===e||null===(t=e.matchedMatch)||void 0===t?void 0:t.batting_team)===(null===e||void 0===e||null===(s=e.matchedMatch)||void 0===s?void 0:s.team_a_id)?{short:null===e||void 0===e||null===(a=e.matchedMatch)||void 0===a?void 0:a.team_a_short,img:null===e||void 0===e||null===(l=e.matchedMatch)||void 0===l?void 0:l.team_a_img,score:null===e||void 0===e||null===(c=e.matchedMatch)||void 0===c?void 0:c.team_a_scores,over:null===e||void 0===e||null===(n=e.matchedMatch)||void 0===n?void 0:n.team_a_over,crr:null===e||void 0===e||null===(i=e.matchedMatch)||void 0===i?void 0:i.curr_rate}:{short:null===e||void 0===e||null===(r=e.matchedMatch)||void 0===r?void 0:r.team_b_short,img:null===e||void 0===e||null===(d=e.matchedMatch)||void 0===d?void 0:d.team_b_img,score:null===e||void 0===e||null===(o=e.matchedMatch)||void 0===o?void 0:o.team_b_scores,over:null===e||void 0===e||null===(m=e.matchedMatch)||void 0===m?void 0:m.team_b_over,crr:null===e||void 0===e||null===(h=e.matchedMatch)||void 0===h?void 0:h.curr_rate},B=(null===e||void 0===e||null===(u=e.matchedMatch)||void 0===u?void 0:u.batting_team)===(null===e||void 0===e||null===(v=e.matchedMatch)||void 0===v?void 0:v.team_a_id)?{short:null===e||void 0===e||null===(p=e.matchedMatch)||void 0===p?void 0:p.team_b_short,img:null===e||void 0===e||null===(j=e.matchedMatch)||void 0===j?void 0:j.team_b_img,score:null===e||void 0===e||null===(b=e.matchedMatch)||void 0===b?void 0:b.team_b_scores,over:null===e||void 0===e||null===(f=e.matchedMatch)||void 0===f?void 0:f.team_b_over,crr:null===e||void 0===e||null===(g=e.matchedMatch)||void 0===g?void 0:g.curr_rate}:{short:null===e||void 0===e||null===(N=e.matchedMatch)||void 0===N?void 0:N.team_a_short,img:null===e||void 0===e||null===(k=e.matchedMatch)||void 0===k?void 0:k.team_a_img,score:null===e||void 0===e||null===(y=e.matchedMatch)||void 0===y?void 0:y.team_a_scores,over:null===e||void 0===e||null===(I=e.matchedMatch)||void 0===I?void 0:I.team_a_over,crr:null===e||void 0===e||null===(M=e.matchedMatch)||void 0===M?void 0:M.curr_rate};return(0,x.jsxs)("div",{className:"border rounded shadow-sm  mb-3 bg-white ".concat((null!==e&&void 0!==e&&null!==(_=e.matchedMatch)&&void 0!==_&&_.match_id,"d-none")),children:[(0,x.jsxs)("div",{style:{backgroundColor:"#424242"},className:"d-flex py-2 px-1 justify-content-between align-items-center mb-",children:[(0,x.jsx)("h6",{className:"mb-0 fw-bold  text-white",children:"Match Scorecard"}),(0,x.jsx)("span",{className:"badge bg-success",children:"Live"})]}),(0,x.jsxs)("div",{className:"border-bottom",children:[(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 px-2 ",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,x.jsx)("img",{src:A.img,alt:A.short,className:"rounded-circle border",style:{width:"45px",height:"45px",objectFit:"cover",objectPosition:"center"}}),(0,x.jsx)("h6",{className:"mb-0 fw-semibold",children:null===A||void 0===A?void 0:A.short})]}),(0,x.jsx)("div",{className:"bg-dark text-white p-2 rounded shadow-sm",children:null===e||void 0===e||null===(S=e.matchedMatch)||void 0===S?void 0:S.first_circle}),(0,x.jsxs)("div",{className:"text-end",children:[(0,x.jsx)("h6",{className:"mb-0 fw-bold",children:A.score?"".concat(A.score,"/").concat(A.over):"--/--"}),(0,x.jsxs)("small",{className:"text-muted",children:[A.over," overs"]}),(0,x.jsx)("div",{children:(0,x.jsxs)("small",{className:"text-muted",children:["Crr: ",A.crr]})})]})]}),(0,x.jsx)("div",{className:"d-flex flex-wrap justify-content-center pb-1",children:null===e||void 0===e||null===(w=e.matchedMatch)||void 0===w||null===(F=w.last36ball)||void 0===F?void 0:F.map(((e,t)=>e?(0,x.jsx)("div",{className:"d-flex justify-content-center align-items-center  rounded-circle bg-light ".concat("W"===e?"text-danger":"text-dark"," border"),style:{width:"24px",height:"24px",fontSize:"0.75rem",fontWeight:"bold",marginRight:"2px"},children:e},t):null))})]}),(0,x.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 px-2",children:[(0,x.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,x.jsx)("img",{src:B.img,alt:B.short,className:"rounded-circle border",style:{width:"45px",height:"45px",objectFit:"cover",objectPosition:"center"}}),(0,x.jsx)("h6",{className:"mb-0 fw-semibold",children:B.short})]}),(0,x.jsxs)("div",{className:"text-end",children:[(0,x.jsx)("h6",{className:"mb-0 fw-bold",children:B.score?"".concat(B.score,"/").concat(B.over):"--/--"}),(0,x.jsxs)("small",{className:"text-muted",children:[B.over," overs"]})]})]})]})})(),e.t10Tv(250),(0,x.jsx)("div",{className:"markets",children:(0,x.jsx)("div",{className:"main-market",children:e.markets&&(0,x.jsx)(E,{data:e.markets,userState:d,shared:o})})}),(0,x.jsx)("br",{}),e.fancies&&e.currentMatch&&"4"==e.currentMatch.sportId&&(0,x.jsx)(l.Fragment,{children:(0,x.jsx)(G,{socketUser:i,fancies:e.fancies,matchId:e.matchId})}),(0,x.jsxs)("div",{style:{background:"none",border:"none"},className:"card m-b-10 my-bet",children:[(0,x.jsx)("h1",{className:"section-title text-center",children:"OPEN BETS"}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsx)(z.A,{})})]}),(0,x.jsxs)("div",{className:"card m-b-10 my-bet d-none",children:[(0,x.jsx)("h6",{className:"p-2 w-100 m-0 bg-info text-white text-center",children:"Declared Bets"}),(0,x.jsx)("div",{className:"card-body",children:(0,x.jsx)(Z,{})})]}),e.marketDataList.stake&&(0,x.jsx)(q.A,{stake:e.marketDataList.stake})]})}),(0,x.jsx)("div",{className:"csmobileround",style:{top:"16px"},children:(0,x.jsxs)("span",{onClick:()=>c(!a),children:[(0,x.jsx)("i",{className:"fa fa-tv"})," "]})})]})})},le=l.memo(ae);var ce=s(8538);const ne=()=>{var e;const[t,s]=l.useState({}),[d,m]=l.useState(),[h,v]=l.useState(!1),g=(0,b.G)(f.Qg),{matchId:N}=(0,n.g)();console.log(N,"matchid inn spots ");const I=(0,i.wA)(),M=(0,b.G)(r.Op),_=(0,b.G)(D.er),{socketUser:S}=(0,j.E$)();l.useEffect((()=>()=>{I((0,r._1)({isOpen:!1,betData:{}}))}),[]),l.useEffect((()=>{_.event&&c.A.getFancyList(N,M).then((e=>{})).catch((e=>console.log(e.message)))}),[_]);l.useEffect((()=>{(async()=>{if(M&&Object.keys(t).length>0){const e=await c.A.getFancyList(N,M);s((0,a.A)((0,a.A)({},t),{},{fancies:e.data.data}))}})()}),[M]),l.useEffect((()=>{g.user._id&&(S.emit("joinRoomMatchIdWUserId","".concat(g.user._id,"-").concat(N)),S.on("connect",(()=>{S.emit("joinRoomMatchIdWUserId","".concat(g.user._id,"-").concat(N))})))}),[g.user]),l.useEffect((()=>{(async()=>{if(null!==B&&void 0!==B&&B.isT10){const s=await k.A.gett10Streams();if(null!==s&&void 0!==s&&s.data){var e,t;const a=null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.filter((e=>parseInt(e.gameId)==(null===B||void 0===B?void 0:B.matchId)));m(null===a||void 0===a||null===(t=a[0])||void 0===t?void 0:t.channel)}}})()}),[t]);const w=()=>B&&"4333"==B.sportId?(0,x.jsx)(p,{matchId:null===B||void 0===B?void 0:B.matchId,isT10:(null===B||void 0===B?void 0:B.isT10)||!1}):B?(0,x.jsx)("iframe",{style:{width:"100%",height:"auto"},src:"https://card.hr08bets.in/api/getScoreData?event_id=".concat(null===B||void 0===B?void 0:B.matchId)}):void 0,F=e=>{if(B&&B.isT10)return(0,x.jsx)("div",{className:"t10-iframe",children:(0,x.jsx)("iframe",{style:{height:"".concat(e,"px")},src:"https://alpha-n.qnsports.live/route/rih.php?id=".concat(d)})})},A=()=>{B&&B.sportId;return!(null!==B&&void 0!==B&&B.isT10)&&(0,x.jsxs)("div",{className:"card m-b-10",style:{border:"0px none"},children:[u.Fr?"":(0,x.jsx)("div",{className:"card-header",children:(0,x.jsxs)("h6",{onClick:()=>v(!h),className:"card-title",children:["Live Match",(0,x.jsxs)("span",{className:"float-right",children:[(0,x.jsx)("i",{className:"fa fa-tv"})," live stream started"]})]})}),!u.Fr&&h&&(0,x.jsxs)("div",{className:"card-body p0",children:[(0,x.jsx)("iframe",{style:{width:"100%",height:"250px"},src:"https://livestream-v3-iframe.akamaized.uk/?eventid=".concat(null===B||void 0===B?void 0:B.matchId)}),"LIVE TV"]}),u.Fr&&(0,x.jsx)("div",{className:"card-body p0",children:(0,x.jsx)("iframe",{style:{width:"100%",height:"250px"},src:"https://livestream-v3-iframe.akamaized.uk/?eventid=".concat(null===B||void 0===B?void 0:B.matchId)})})]})},{currentMatch:B,markets:R,fancies:T}=t,C=null===B||void 0===B?void 0:B.matchId;l.useEffect((()=>{C&&ce.A.iframeUrl(C).then((e=>{console.log(e,"res of data")})).catch((e=>{console.log(e,"error")}))}),[C]);const E=(e,t)=>{if(!e||!t)return 0;e=e.toLowerCase().replace(/[^a-z]/g,""),t=t.toLowerCase().replace(/[^a-z]/g,"");let s=0;for(let a of e)t.includes(a)&&s++;return s/Math.max(e.length,t.length)},[U,L]=l.useState({}),[P,O]=l.useState({}),Y=l.useRef(null);return l.useEffect((()=>{o.A.get("https://cricket-apis.onrender.com/api/live-matches").then((e=>{var t;console.log(e,"recent matches ");const s=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data,a=null===B||void 0===B?void 0:B.name;if(!a)return;const[l,c]=null===a||void 0===a?void 0:a.split(" v ").map((e=>e.trim())),n=s.find((e=>{const t=e.team_a||"",s=e.team_b||"",a=E(l,t),n=E(c,s),i=E(l,s),r=E(c,t);return a>.7&&n>.7||i>.7&&r>.7}));L(n||null),console.log(n,"matched match hdhdhdh match found")}))}),[null===B||void 0===B?void 0:B.name]),l.useEffect((()=>{if(null===U||void 0===U||!U.match_id)return;const e=async()=>{try{var e;const t=await o.A.post("https://cricket-apis.onrender.com/api/live-match",{match_id:null===U||void 0===U?void 0:U.match_id}),s=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data;O(s),console.log("Live match data updated",s)}catch(t){console.error("Error fetching live match:",t)}};return e(),Y.current=setInterval(e,1e3),()=>{Y.current&&clearInterval(Y.current)}}),[null===U||void 0===U?void 0:U.match_id]),!u.Fr||u.Fr&&(null===g||void 0===g||null===(e=g.user)||void 0===e?void 0:e.role)!=y.T.user?(0,x.jsx)(ee,{currentMatch:B,fancies:T,scoreBoard:w,marketDataList:t,matchId:N,markets:R,t10Tv:F,matchedMatch:P,otherTv:A}):(0,x.jsx)(le,{currentMatch:B,fancies:T,scoreBoard:w,marketDataList:t,matchId:N,t10Tv:F,markets:R,matchedMatch:P,otherTv:A})},ie=l.memo(ne)}}]);