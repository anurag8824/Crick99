"use strict";(self.webpackChunkfair_react=self.webpackChunkfair_react||[]).push([[5906],{5906:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var s=a(9051),c=a.n(s),r=a(9950),n=a(4806),l=a.n(n),i=a(8429),d=a(7232),o=a(4933);const m=new class{getActiveMarkets(e){return o.Ay.get("active-markets?matchId=".concat(e))}changeStatusMarket(e,t){return o.Ay.get("change-status-markets?marketId=".concat(e,"&matchId=").concat(t))}deleteMarket(e,t){return o.Ay.get("delete-market?marketId=".concat(e,"&matchId=").concat(t))}marketResult(e,t,a){return o.Ay.get("result-market?marketId=".concat(e,"&matchId=").concat(t,"&selectionId=").concat(a))}rollbackmarketResult(e,t){return o.Ay.get("rollback-result-market-wise?marketId=".concat(e,"&matchId=").concat(t))}};var h=a(2964),u=a(1925),x=a(4414);const k=()=>{const[e,t]=r.useState([]),[a,s]=r.useState({}),[n,o]=r.useState(""),[k,j]=r.useState(!1),{matchId:v}=(0,i.g)();r.useEffect((()=>{f()}),[]);const f=()=>{m.getActiveMarkets(v).then((e=>{t(e.data.data)}))};return(0,x.jsx)("div",{className:"container-fluid",children:(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)(l(),{isOpen:k,onRequestClose:e=>{j(!1)},contentLabel:"Set Max Bet Limit",className:"modal-dialog",ariaHideApp:!1,children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h5",{children:"Choose To Win Match"}),(0,x.jsx)("button",{onClick:()=>j(!1),className:"close float-right",children:"X"})]}),(0,x.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n||d.oR.error("Please select winner"),m.marketResult(a.marketId,a.matchId,n).then((()=>{d.oR.success("Result Set"),j(!1),f()})).catch((e=>{const t=e;d.oR.error(t.message)}))},className:"form loginform",children:[(0,x.jsx)("div",{className:"modal-body",children:(0,x.jsxs)("div",{className:"row form-group",children:[(0,x.jsx)("div",{className:"col-md-5",children:(0,x.jsx)("label",{children:"Winning Team Select"})}),(0,x.jsx)("div",{className:"col-md-7",children:(0,x.jsxs)("select",{onChange:e=>o(e.target.value),name:"win_team",id:"win_team",required:!0,children:[(0,x.jsx)("option",{value:"",children:"Please Select Winning Team"}),a.marketId&&a.runners.map((e=>(0,x.jsx)("option",{value:e.selectionId,children:e.runnerName},e.selectionId))),(0,x.jsx)("option",{value:"-1",children:"Abandoned"})]})})]})}),(0,x.jsxs)("div",{className:"modal-footer",children:[(0,x.jsxs)("button",{type:"button",className:"btn btn-info","data-dismiss":"modal",children:[(0,x.jsx)("i",{className:"fas fa-undo-alt"})," No"]}),(0,x.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[(0,x.jsx)("i",{className:"fas fa-paper-plane"})," Yes"]})]})]})]})}),(0,x.jsxs)("div",{className:"col-md-12 main-container",children:[(0,x.jsx)("button",{onClick:()=>{h.A.saveMatch([{matchId:v}],!0).then((()=>{d.oR.success("Synk Data Successfully. Please wait"),f()})).catch((e=>{const t=e.response.data.message;d.oR.error(t)}))},className:"btn btn-primary",style:{marginBottom:"10px"},children:"Sync Markets"}),(0,x.jsxs)("table",{className:"table table-bordered",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"In Play"}),(0,x.jsx)("th",{children:"Game"}),(0,x.jsx)("th",{children:"Start Time"}),(0,x.jsx)("th",{children:"Status"}),(0,x.jsx)("th",{children:"Action"}),(0,x.jsx)("th",{children:"Set Result"})]})}),(0,x.jsx)("tbody",{children:e.map((a=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:(0,x.jsx)("i",{className:"fas fa-circle ".concat(a.isActive?"text-success":"text-danger"," fa-lg mr-2")})}),(0,x.jsx)("td",{children:a.marketName}),(0,x.jsx)("td",{children:c()(a.marketStartTime).format(u.i$)}),(0,x.jsx)("td",{children:a.isActive?"Active":"In-Active"}),(0,x.jsx)("td",{children:(0,x.jsxs)("div",{children:[(0,x.jsxs)("a",{href:"#",onClick:s=>((a,s)=>{a.preventDefault(),m.changeStatusMarket(s.marketId,s.matchId).then((a=>{const c=[...e],r=c.findIndex((e=>e.marketId===s.marketId));c[r].isActive=!s.isActive,t(c)}))})(s,a),children:["Click To ",a.isActive?"In-Active":"Active"]}),(0,x.jsx)("br",{}),(0,x.jsxs)("a",{href:"#",onClick:s=>((a,s)=>{a.preventDefault(),m.deleteMarket(s.marketId,s.matchId).then((a=>{const c=[...e],r=c.findIndex((e=>e.marketId===s.marketId));c[r].isDelete=!s.isDelete,t(c)}))})(s,a),children:["Click To ",a.isDelete?"Undo":"Delete"]})]})}),(0,x.jsx)("td",{className:"text-left",children:"yes"==(null===a||void 0===a?void 0:a.resultDelcare)?(0,x.jsx)("a",{onClick:e=>((e,t)=>{e.preventDefault(),m.rollbackmarketResult(t.marketId,t.matchId).then((()=>{f(),d.oR.success("Result Rollback")})).catch((e=>{const t=e;d.oR.error(t.message)}))})(e,a),href:"#",style:{color:"red"},children:"Rollback Result"}):(0,x.jsx)("a",{onClick:e=>((e,t)=>{e.preventDefault(),j(!0),s(t)})(e,a),href:"#",children:"Result Declare"})})]},a.marketId)))})]})]})]})})}}}]);